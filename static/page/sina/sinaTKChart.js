xh5_define("plugins.indicatortab",["utils.util"],function(t){"use strict";function i(i){function l(i){if(!i)return void 0;t.isArr(i)||(i=[i]);for(var e,n=[],a=0,r=i.length;r>a;a++)e={name:i[a]},n.push(e);return n}function s(){function t(t){a.save({options:{mode:"cookie",path:"/",expires:71996400},uid:["kke_indicator_news",(new Date).getTime()].join("|"),key:"kke_indicator_news",value:t})}function e(){var t=!1;return a.load({options:"cookie",uid:["kke_indicator_news",(new Date).getTime(),Math.floor(987654321*Math.random()+1)].join("|"),key:"kke_indicator_news"},function(i){return'"BRAR"'==i?(t=i,!0):t=!1},!0),t}function r(t){e()||"k"==i.type&&(u.main.ctn=n("span"),h.appendChild(u.main.ctn),o(t,u.main.ctn),l())}function l(){var t,i=f.childNodes,a=i.length;if(!e())for(t=0;a>t;t++)i[t].getAttribute("data-indicator")==u.child.name[0]&&(u.child.ctn=n("span"),i[t].appendChild(u.child.ctn),o(u.child,u.child.ctn))}function s(){e()||(u.main.ctn.style.display=u.child.ctn.style.display="none",t(u.child.name[0]))}function o(t,e){e.innerHTML=t.text,e.style.color="#fff",e.style.fontFamily="\u9ed1\u4f53",e.style.background="#f00",e.style.width=e.style.height=e.style.lineHeight=t.radius+"px",e.style.WebkitBorderRadius=e.style.BorderRadius=e.style.MorBorderRadius=t.radius/2+"px",e.style.position=t.position||"absolute",e.style.styleFloat=e.style.cssFloat="right",e.style.textAlign="center",e.style.left=t.left||i.posX+2*i.tabheight+"px"}function c(t){h=t}function d(t){f=t}var h,f,u={main:{ctn:void 0,position:"absolute",display:"block",text:"",radius:15},child:{ctn:void 0,num:0,left:"0px",position:"relative",display:"none",name:["BRAR"],text:"",radius:7}};return{cfg:u,displayAllCircle:s,initChildCircle:l,initCircle:r,getChildParentCtn:d,getMainParentCtn:c}}function o(){var e,n,a,l="data-indicator",s=50,o=new function(){var o=function(){for(var e,a=n.childNodes.length;a--;)e=n.childNodes[a],t.cssUtil.rmCls(e,i.cssclass.active)},c=function(e){r.preventDefault(e);var n=r.getTarget(e);b=n;var a=n.getAttribute(l);if(w=a,a){o(),t.cssUtil.adCls(n,i.cssclass.active);for(var s=[].concat(y).concat({name:a}).concat(m),c=C.length;c--;)C[c].tCharts(s,{isexclusive:!0});"\u65e0"==a&&(a="none_indicator"),a==k.cfg.child.name&&k.displayAllCircle(),t.suda(i.type+"_"+a)}},h=function(t){r.preventDefault(t);var i=r.getTarget(t),e=i.getAttribute("data-dir");d.drawTabs(e),k.initChildCircle()};this.init=function(){a=t.$C("div"),e=t.$C("div"),n=t.$C("ul"),r.addHandler(a,"click",h),t.xh5_deviceUtil.allowt&&r.addHandler(a,"touchend",h),r.addHandler(n,"click",c),t.xh5_deviceUtil.allowt&&r.addHandler(n,"touchend",c),i.arrowleft?(a.style.styleFloat=a.style.cssFloat="left",a.style.margin=[0,9,0,i.posX,""].join("px "),e.style.margin=[0,i.rightW,0,i.posX+s,""].join("px ")):(a.style.styleFloat=a.style.cssFloat="right",a.style.margin=[0,i.rightW,0,0,""].join("px "),e.style.margin=[0,s+i.rightW,0,i.posX,""].join("px "));var l=n.style;l.listStyle="none",l.padding=0,l.margin=0,e.appendChild(n),v&&v.appendChild(a),v&&v.appendChild(e),k.getChildParentCtn(n),k.getMainParentCtn(a)}},c=new function(){function e(e){var n=t.$C("span");return n.className=i.cssclass.arrow,n.innerHTML=e?"\u25b2":"\u25bc",n.setAttribute("data-dir",e?"-1":"1"),n}var n,r;this.init=function(){n=new e(!0),r=new e,a.appendChild(n),a.appendChild(r)},this.changeColor=function(t){n.style.color=r.style.color=t?"#000":"#ccc"}},d=new function(){var a=0;this.activeTab=function(){var e=n.childNodes[i.active];e&&(t.cssUtil.adCls(e,i.cssclass.active),b=e,w=e.getAttribute(l))},this.drawTabs=function(r){var s=e.offsetWidth,o=Math.min(7,Math.floor(s/(x+2))),d=g.length;c.changeColor(d>o),isNaN(r)&&(r=0);var h=a+r*o;0>h?h=0:h>=d&&(h=a),a=h;for(var f,p=Math.min(d,h+o),v=p-h;n.childNodes.length<v;)f=t.$C("li"),n.appendChild(f);for(;n.childNodes.length>v;)n.removeChild(n.lastChild);for(;p>h;h++){var y=g[h],m=u(y)||y;f=n.childNodes[h-a],f.innerHTML=m,f.setAttribute(l,y),f.className=i.cssclass.normal,w===y&&t.cssUtil.adCls(f,i.cssclass.active),f.style.width=x+"px"}}};o.init(),c.init(),d.drawTabs(),d.activeTab()}function c(){var e=["list-style:none","float:left","background:#efefef","border:1px solid #d5d5d5","color:#888","margin-left:-1px","line-height:"+i.tabheight+"px","text-align:center","font-size:12px","cursor:pointer"];e="."+p.normal+"{"+e.join(";")+"}";var n=["background:#494949; color:#fff; border-color:#999;"];n="."+p.active+"{"+n.join(";")+"}";var a=["float:left; width:20px; cursor:pointer; text-align:center; margin:0 1px; border:1px solid #eee;","line-height:"+i.tabheight+"px"];a="."+p.arrow+"{"+a.join(";")+"}";var r="."+p.arrow+":hover {filter:Alpha(Opacity=60);opacity:0.6;}",l=e+n+a+r;t.cssUtil.inject(l)}var d=["VOLUME","MACD","KDJ","RSI","BOLL","WR","DMI","BBIBOLL","ROC","PSY","OBV","WVAD","CCI","TRIX","DMA","EXPMA","BIAS","ASI"],h=["TVOL","LB"],f=[{name:"TFLOW",alias:"\u51c0\u4e70\u5165"},{name:"LB",alias:"\u91cf\u6bd4"},{name:"POSITION",alias:"\u6301\u4ed3\u91cf"},{name:"TZYS",alias:"\u6536\u76ca\u5bf9\u6bd4"},{name:"DPDKS",alias:"\u591a\u7a7a\u6536\u76ca"}],u=function(t){for(var i,e,n=f.length;n--;)if(e=f[n],e.name.toUpperCase()==t.toUpperCase()){i=e.alias;break}return i},p={normal:"kke_indicators_tab_normal",active:"kke_indicators_tab_active",arrow:"kke_indicators_tab_arrow"};i=e({posX:54,rightW:1,tabwidth:61,tabheight:20,type:"k",domid:void 0,charts:void 0,tabs:void 0,fix:{firsts:void 0,lasts:void 0},cssclass:{normal:p.normal,active:p.active,arrow:p.arrow},arrowleft:!0,active:0},i||{});var v=t.$DOM(i.domid),g=i.tabs||("k"==i.type?d:h),y=l(i.fix.firsts),m=l(i.fix.lasts),C=i.charts;t.isArr(C)||(C=[C]);var b,w,x=i.tabwidth,k=new s;c(),o(),"hf_"!=i.domid.split("__")[1].substring(0,3)&&k.initCircle({display:"block",text:1,radius:15}),this.getCurrentTab=function(){return b},this.getCurrentIndicatorName=function(){return w}}var e=t.oc,n=t.$C,a=t.bridge,r=t.xh5_EvtUtil;return new function(){this.VER="1.2.4",KKE.cls.IndicatorTab=i,this.get=function(e,n){var a=new i(e);t.isFunc(n)&&n(a)}}});;
xh5_define("plugins.menu",["utils.util"],function(e){"use strict";function t(t){function o(a){var i="touzi_pc_v2_market_today";if(t.user_obj.mt&&"cntouzi2"==t.user_obj.mt)switch(a){case"ts":e.suda(i+"_05",null,i);break;case"t5":e.suda(i+"_06",null,i);break;case"kcl":e.suda(i+"_07",null,i);break;case"kdd":e.suda(i+"_08",null,i);break;case"kd":e.suda(i+"_09",null,i);break;case"kw":e.suda(i+"_10",null,i);break;case"km":e.suda(i+"_11",null,i);break;case"k5":e.suda(i+"_12",null,i);break;case"k15":e.suda(i+"_13",null,i);break;case"k30":e.suda(i+"_14",null,i);break;case"k60":e.suda(i+"_15",null,i)}}function h(e){n.preventDefault(e),n.stopPropagation(e);var t=n.getTarget(e);if(t.getAttribute("data-a")&&(t=t.parentNode),D!=t||"more"===t.getAttribute("data-view")){D=t;var a=t.innerHTML;if(a){if("more"===t.getAttribute("data-view"))return void R(t);F(),r(k)&&(r(k).style.display="none"),E(t),C.setPPT("none"),M(t),C.chooseTab.tab=t.getAttribute("data-view"),C.re("KKE_MENU_CLICK_TAB",null)}}}function p(a){for(var i,r,o=m.length,n=0;o>n;n++){i=m[n].tChart,r=m[n].kChart,i&&i.hide();var s=new Date,l=new Date;if(r){r.show();var d=a.getAttribute("data-view");switch(d){case"km12":s.setDate(s.getDate()-264);break;case"km1":s.setDate(s.getDate()-22);break;case"km3":s.setDate(s.getDate()-66);break;case"kcl":}if("km1"==d||"km3"==d||"km12"==d)r.showYTD(),r.dateFromTo(s,l);else if("kdd"==d)e.suda("m_bs"),("cnlv1"==t.user_obj.mt||"cnlv2"==t.user_obj.mt||"cntouzi2"==t.user_obj.mt||"cnlv1wap"==t.user_obj.mt)&&(L=1,r.showView("kd"),C.setPPT("block"),r.setDimension({I_V_O:0}),r.pCharts([{name:t.user_obj.DKpChart}],{isexclusive:!0}),"cnlv1wap"!=t.user_obj.mt?r.tCharts([{name:t.user_obj.DKtChart},{name:"volume"}],{isexclusive:!0}):r.tCharts([{name:t.user_obj.DKtChart}],{isexclusive:!0}),"TZY"==t.user_obj.DKpChart&&r.setReK(-1),r.setLineStyle({linetype:"solid"}));else if("k1"==d)r.showView(d),r.setLineStyle({linetype:"line"}),r.pCharts(null,{toremove:!0});else{if("cnlv1"==t.user_obj.mt||"cnlv2"==t.user_obj.mt||"cntouzi2"==t.user_obj.mt||"cnlv1wap"==t.user_obj.mt){if(L>0){L=0;var h;if("cnlv1wap"!=t.user_obj.mt)switch(t.user_obj.indicatorTabLogger.h5k&&(h=t.user_obj.indicatorTabLogger.h5k.getCurrentIndicatorName()),h=h||"MACD",T){case"HF":case"global_index":r.tCharts([{name:h},{name:"BLANKCTN"}],{isexclusive:!0,callback:function(){1==u&&(u=2,t.user_obj.indicatorTab(r))}});break;default:r.tCharts([{name:"VOLUME"},{name:h},{name:"BLANKCTN"}],{isexclusive:!0,callback:function(){1==u&&(u=2,t.user_obj.indicatorTab(r))}})}else r.tCharts([{name:"MACD"}],{isexclusive:!0});"kcl"==d?r.pCharts([],{isexclusive:!0,callback:function(){b.kChart.setCustom.show_underlay_vol&&r.setCustom({show_underlay_vol:b.kChart.setCustom.show_underlay_vol})}}):r.pCharts(b.kChart.pCharts,{isexclusive:!0,callback:function(){b.kChart.setCustom.show_underlay_vol&&r.setCustom({show_underlay_vol:b.kChart.setCustom.show_underlay_vol})}}),r.setDimension({I_V_O:-22})}else"kcl"==d?r.showView(d):r.pCharts(b.kChart.pCharts,{isexclusive:!0,callback:function(){b.kChart.setCustom.show_underlay_vol&&r.setCustom({show_underlay_vol:b.kChart.setCustom.show_underlay_vol})}});v(t.user_obj.symbol)&&a.getAttribute("data-id")&&r.setReK("cnlv1wap"==t.user_obj.mt?0:b.kChart.setReK)}r.showView(d),("forex"==t.user_obj.market||"forex_yt"==t.user_obj.market)&&r.pCharts(b.kChart.pCharts,{isexclusive:!0,callback:function(){b.kChart.setCustom.show_underlay_vol&&r.setCustom({show_underlay_vol:b.kChart.setCustom.show_underlay_vol})}}),"kcl"!==d&&r.setLineStyle({linetype:b.kChart.setLineStyle.linetype})}a.getAttribute("data-id")?a.childNodes[1]&&(a.childNodes[1].style.display="none"):(a.parentNode&&(a.parentNode.style.display="none"),"CN"==T&&a.getAttribute("data-rek")&&(r.setReK(Number(a.getAttribute("data-rek"))),I=a.getAttribute("data-rek"),b.kChart.setReK=a.getAttribute("data-rek"),c.save({uid:[t.user_obj.CFGSETTING_IFRAME_PREFIX,(new Date).getTime()].join("|"),key:t.user_obj.CFGSETTING_IFRAME_PREFIX,value:b})))}else a.childNodes[1]&&(a.childNodes[1].style.display="none"),"kdd"!==a.getAttribute("data-view")&&(u=2),m[n].initK(null,a.getAttribute("data-view"),a.getAttribute("data-rek")),a.getAttribute("data-rek")&&(I=a.getAttribute("data-rek")||_||0,a.parentNode&&(a.parentNode.style.display="none"))}}function v(e){return/^sh6\d{5}|sh900\d{3}|sz00\d{4}|sz30\d{4}|sz20\d{4}$/.test(e)}e.xh5_EvtDispatcher.call(this);var b=t.user_obj.settingCfg,m=[],f={tab:[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"},{lab:"\u66f4\u591a",v:"more",t:"K"}],clsName:{normal:"kke_menus_tab_normal",edage:"kke_menus_tab_edage",active:"kke_menus_tab_active",active_a:"kke_menus_tab_active_a",rek:"kke_menus_tab_rek",more:"kke_menus_tab_more",up:"kke_menu_tab_up",down:"kke_menu_tab_down"},clsStyle:{cnnormal:"{width:41px;height:25px;line-height:25px;margin-top:3px;float:left;background:#EFF5FF;border:1px solid #EFF5FF;color:#08237a;text-align:center;font-size:12px;cursor:pointer;}",normal:"{width:47px;height:25px;line-height:25px;margin-top:3px;float:left;background:#EFF5FF;border:1px solid #EFF5FF;color:#08237a;text-align:center;font-size:12px;cursor:pointer;}",active:"{background-color:#ffffff;border-top:2px solid #062784;border-left:1px solid #dde4f4;border-right:1px solid #dde4f4;border-bottom:1px solid #ffffff;cursor:pointer;}",active_a:"{border-bottom:2px #3990e6 solid;display:inline-block;color:#3990e6;}",edage:"{width:100%;height:30px;border-top: 1px solid #dde4f4;border-bottom: 1px solid #dde4f4;background-color: #EFF5FF;position: relative;z-index: 233;}",rek:"{list-style:none;border:1px solid #dde4f4;margin-bottom:-1px;height:23px;line-height:23px;text-align:center;cursor:pointer;background-color:#EFF5FF;}"}},g={normal:"{height:35px;line-height:35px;position:relative;float:left;background:#ffffff;border:1px solid #ffffff;color:#1a1a1a;text-align:center;font-size:14px;cursor:pointer;}",active:"{background-color:#ffffff;color:#3990e6;border-left:1px solid #ffffff;border-right:1px solid #ffffff;cursor:default;}",active_a:"{border-bottom:2px #3990e6 solid;margin-bottom:-2px;display:inline-block;color:#3990e6;}",edage:"{width:100%;height:37px;border-top: 1px solid #dde4f4;border-bottom: 1px solid #dde4f4;background-color: #ffffff;position: relative;z-index: 233;font-weight:bold;}",rek:"{list-style:none;border:1px solid #f0f0f0;margin-bottom:-1px;height:33px;line-height:33px;text-align:center;cursor:pointer;background-color:#f0f0f0;color:#1a1a1a;}",more:'{position: absolute;width: 13px;height: 9px;background-image:url("//www.sinaimg.cn/cj/finance_images/ua_ico.png");float: left;top:50%;margin-top:-4px;left: 50%;margin-left: 12px;}',up:"{background-position: 2px -105px;}",down:"{background-position: 2px -78px;}"};(t.iswap||t.menu_wapmore)&&(f.clsStyle=g);var k="KKE_more_"+12345*Math.random();t=i({type:"C",tchart:void 0,kchart:void 0,menu_dom_id:void 0,active:0,tab:[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"},{lab:"\u66f4\u591a",v:"more",t:"K"}],tabPosX:15,clsName:{edage:f.clsName.edage,normal:f.clsName.normal,active:f.clsName.active,active_a:f.clsName.active_a,rek:f.clsName.rek,more:f.clsName.more||void 0,up:f.clsName.up||void 0,down:f.clsName.down||void 0},menu_rek:void 0,cb:void 0,me:void 0,menu_wapmore:void 0,user_obj:{symbol:"sh000001"},more:void 0},t||{}),t.me&&m.push(t.me);var _,C=this,w=r(t.menu_dom_id),y=t.active||0,N=t.tab||f.tab,x=[],A=[],T=e.market(t.user_obj&&t.user_obj.symbol||"sh000001"),j=function(e,a){var i=a.normal,r=a.active,o=a.edage,n=a.rek;("cnlv1"==t.user_obj.mt||"cnlv2"==t.user_obj.mt)&&(i=a.cnnormal),i="."+e.normal+i+"\n",r="."+e.active+r+"\n",o="."+e.edage+o+"\n",n="."+e.rek+n+"\n";var s=i+r+o+n;if(t.iswap||t.menu_wapmore){var d=a.active_a,c=a.active_a,u=a.more,h=a.up,p=a.down;d="."+e.active+" a"+d+"\n",c="."+e.active_a+c+"\n",u="."+e.more+u+"\n",h="."+e.up+h+"\n",p="."+e.down+p+"\n";var v=t.iswap?"":"."+e.normal+" a:hover"+a.active_a+"\n";s+=d+c+v+u+h+p}l.inject(s)},K=function(){var e=x[y];e&&l.adCls(e,t.clsName.active)},F=function(){for(var e,a=x.length;a--;)e=x[a],l.rmCls(e,t.clsName.active),l.rmCls(e.childNodes[0],t.clsName.active),l.rmCls(e.childNodes[0],t.clsName.active_a);for(var i,r=A.length;r--;)i=A[r],l.rmCls(i.childNodes[0],t.clsName.active_a),l.rmCls(i,t.clsName.active)};this.chooseTab={tye:"T",tab:"t1"};var D,R=function(e){""==e.childNodes[2].style.display?(e.childNodes[2].style.display="none",l.rmCls(e.childNodes[1],t.clsName.up),l.adCls(e.childNodes[1],t.clsName.down)):(e.childNodes[2].style.display="",l.rmCls(e.childNodes[1],t.clsName.down),l.adCls(e.childNodes[1],t.clsName.up))},E=function(a){if(a.getAttribute("data-id"))if("k5"!==a.getAttribute("data-view")&&"k15"!==a.getAttribute("data-view")&&"k30"!==a.getAttribute("data-view")&&"k60"!==a.getAttribute("data-view")&&"km3"!==a.getAttribute("data-view")&&"km1"!==a.getAttribute("data-view")&&"km12"!==a.getAttribute("data-view")||!t.iswap&&!t.menu_wapmore||(l.rmCls(a.parentNode.parentNode.childNodes[1],t.clsName.up),l.adCls(a.parentNode.parentNode.childNodes[1],t.clsName.down),l.adCls(a.parentNode.parentNode.childNodes[0],t.clsName.active),l.adCls(a.parentNode.parentNode.childNodes[0],t.clsName.active_a)),t.menu_wapmore)l.adCls(a.childNodes[0],t.clsName.active_a);else{var i=e.getCSS(a).color;l.adCls(a,t.clsName.active),a.childNodes[1]&&(a.childNodes[1].style.color=i)}else t.menu_wapmore?l.adCls(a.parentNode.parentNode.childNodes[0],t.clsName.active_a):l.adCls(a.parentNode.parentNode,t.clsName.active)},M=function(e){var a=m.length;if("T"==e.getAttribute("data-type")){for(var i,r,n=0;a>n;n++)i=m[n].tChart,r=m[n].kChart,r&&r.hide(),i&&(i.show(),i.showView(e.getAttribute("data-view")));var s;"cnlv1wap"!=t.user_obj.mt&&(t.user_obj.indicatorTabLogger.h5t&&(s=t.user_obj.indicatorTabLogger.h5t.getCurrentIndicatorName()),("HF"==T||"global_index"==T)&&(s="X"),s||2!=u||(u=3,t.user_obj.indicatorTab(i))),C.chooseTab.tye="T"}else C.chooseTab.tye="K",p(e);o(e.getAttribute("data-view"))},I=0,L=9,H=function(){var e=a("div");w&&w.appendChild(e),e.className=t.clsName.edage;var i=function(i,r){r=r||0;var o=a("div");x.push(o),e.appendChild(o),o.className=t.clsName.normal,o.style.marginLeft=r+"px",(t.iswap||t.menu_wapmore)&&(o.style.width=100/t.tab.length-1+"%"),o.setAttribute("data-id","KKE_tab_"+N[i].v),o.setAttribute("data-view",N[i].v),o.setAttribute("data-type",N[i].t),n.addHandler(o,"click",h),s.allowt&&n.addHandler(o,"touchend",h),"kdd"===N[i].v;var l=a("a");if(l.innerHTML=N[i].lab,l.setAttribute("data-a","a"),o.appendChild(l),"more"==N[i].v){var d=a("div");d.setAttribute("data-a","a"),d.className=t.clsName.more+" "+t.clsName.down,o.appendChild(d)}return o},r=function(e){var a=function(e){n.preventDefault(e),n.getTarget(e).childNodes[1]&&(n.getTarget(e).childNodes[1].style.display="")};n.addHandler(e,"touchstart",a),n.addHandler(e,"mouseover",a);var i=function(e){n.preventDefault(e);var a=n.getTarget(e),i=n.getRelatedTarget(e);i&&a!==i&&d(a,i)||a.childNodes[1]&&(a.childNodes[1].style.display="none"),a.parentNode&&a.parentNode.childNodes[1]&&a.parentNode.childNodes[0].getAttribute("data-a")&&!t.menu_wapmore&&(a.parentNode.childNodes[1].style.display="none")};n.addHandler(e,"touchend",i),n.addHandler(e,"mouseout",i)},o=function(){for(var e=t.show,a=0;a<N.length;a++)if(!e||-1!=e.indexOf(N[a].v))switch(N[a].v){case"kd":case"kw":case"km":case"kcl":var o=i(a);t.menu_rek&&v(t.user_obj.symbol)&&P(o),r(o);break;case"more":t.more&&(o=i(a),S(o));break;default:t.iswap||t.menu_wapmore?i(a):0==a?i(a,t.tabPosX):i(a)}};o(),j(f.clsName,f.clsStyle),K()},P=function(e){var i=a("ul");i.style.display="none",i.style.padding=i.style.margin=0,e&&e.appendChild(i);for(var r=[{lab:"\u540e\u590d\u6743",v:1},{lab:"\u524d\u590d\u6743",v:-1},{lab:"\u4e0d\u590d\u6743",v:0}],o=3;o--;){var s=a("li");s.className=t.clsName.rek,s.setAttribute("data-rek",r[o].v),s.setAttribute("data-view",e.getAttribute("data-view"));var l=a("a");l.setAttribute("data-a","a"),l.innerHTML=r[o].lab,s.appendChild(l),i.appendChild(s),n.addHandler(e,"touchend",h),n.addHandler(e,"click",h)}var c=function(e){n.preventDefault(e);var t=n.getTarget(e).parentNode,a=n.getRelatedTarget(e),i=n.getTarget(e);a&&t!==a&&d(t,a)||i.getAttribute("data-rek")&&(t.style.display="none"),d(t.parentNode,a)||t.getAttribute("data-rek")&&(t.parentNode.style.display="none")};n.addHandler(i,"touchend",c),n.addHandler(i,"mouseout",c)},S=function(e){var i=a("ul");i.id=k,i.style.display="none",i.style.padding=i.style.margin=0,e&&e.appendChild(i);for(var r=t.more,o=0,s=r.length;s>o;o++){var l=r[o],c=a("li");c.className=t.clsName.rek,c.setAttribute("data-id","KKE_tab_"+l.v),c.setAttribute("data-view",l.v);var u=a("a");u.setAttribute("data-a","a"),u.innerHTML=l.lab,c.appendChild(u),i.appendChild(c),n.addHandler(e,"touchend",h),n.addHandler(e,"click",h),A.push(c)}if(!t.iswap){var p=function(e){n.preventDefault(e);var t=n.getTarget(e).parentNode.parentNode,a=n.getRelatedTarget(e),i=n.getTarget(e).parentNode;a&&t!==a&&d(t,a)||(i.getAttribute("data-id")&&(t.style.display="none"),t.getAttribute("data-view")&&(i.style.display="none"))};n.addHandler(i,"touchend",p),n.addHandler(i,"mouseout",p)}};H(),this.setPPT=function(e){window.chartPPT_panel&&(window.chartPPT_panel.style.display=e)},this.setTKChart=function(e){m=e},this.setTarget=function(e){if(y=e,y<x.length){D=x[e],F();var a=x[y];a&&l.adCls(a,t.clsName.active);for(var i=m.length;i--;){var r=m[i].kChart;r&&r.showView(N[y].v)}}},this.setCfg=function(e){b=e},this.setChart=function(e){if(D&&"kdd"!==D.getAttribute("data-view")&&(u=2),e&&e.k){var a;for(a=0;a<m.length;a++)e.o.symbol==m[a].chartUserobj.symbol&&(m[a].kChart=e.k);for("CN"==T&&"cnlv1wap"!==t.user_obj.mt&&(I=_=t.user_obj.settingCfg.kChart.setReK),a=0;a<m.length;a++){var i=m[a].kChart;D&&D.view&&i.showView(D.view),D&&D.getAttribute("data-rek")&&"CN"==T&&(i.setReK(Number(D.getAttribute("data-rek"))),b.kChart.setReK=D.getAttribute("data-rek"),c.save({uid:[t.user_obj.CFGSETTING_IFRAME_PREFIX,(new Date).getTime()].join("|"),key:t.user_obj.CFGSETTING_IFRAME_PREFIX,value:b})),D&&!D.getAttribute("data-rek")&&_&&v(t.user_obj.symbol)&&"kdd"!=D.getAttribute("data-view")&&i.setReK(_)}}}}var a=e.$C,i=e.oc,r=e.$DOM,o=e.isFunc,n=e.xh5_EvtUtil,s=e.xh5_deviceUtil,l=e.cssUtil,d=e.$CONTAINS,c=e.bridge,u=1;return e.fInherit(t,e.xh5_EvtDispatcher),new function(){this.VER="1.1.6",this.get=function(e,a){var i=new t(e);o(a)&&a(i)}}});;
xh5_define("plugins.compare",["utils.util"],function(e){function t(t){function s(e){return"string"==typeof e?e.replace(/\./g,"$"):s(e+"").split(",")}function r(e){return"string"==typeof e?e.replace(/\$/g,"."):r(e+"").split(",")}function c(){var e=y.clsName.edage,i=y.clsName.label,a=y.clsName.panel,n=y.clsName.panel_popup,l=y.clsName.list,s=y.clsName.dellist,r=y.clsName.item,c=y.clsName.alert,d=y.clsName.button,h=y.clsName.input,u="\n";t.delistPos&&(y.clsStyle=y.weiboclsStyle),e="."+e+y.clsStyle.edage+u,i="."+i+y.clsStyle.label+u,l="."+l+y.clsStyle.list+u,s="."+s+y.clsStyle.dellist+u,r="."+r+y.clsStyle.item+u,a="."+a+y.clsStyle.panel+u,n="."+n+y.clsStyle.popup+u,h="."+h+y.clsStyle.input+u,c="."+c+y.clsStyle.alert+u,d="."+d+y.clsStyle.button;var p="."+y.clsName.button+" a"+y.clsStyle.button_a+u+"."+y.clsName.button+" a:hover"+y.clsStyle.button_a_hover+u,m="."+y.clsName.more+y.clsStyle.more+u,_="."+y.clsName.more+" a"+y.clsStyle.button_a+u+"."+y.clsName.more+" a:hover"+y.clsStyle.button_a_hover+u,f=e+i+a+n+d+p+h+l+s+r+m+_+c;o.inject(f)}function d(){var e,i=e='<div id="h5tk_compareLabel_'+t.id+'" class='+y.clsName.list+"></div>";t.delistPos?i="":e="";var a='<div class="'+y.clsName.edage+'"><h4 class='+y.clsName.label+'>\u5bf9\u6bd4\uff1a</h4><div class="'+y.clsName.panel+'" id="h5tk_compareIndex_" '+t.id+'></div><input type="text" id="h5tk_compareTxt_'+t.id+'" class="'+y.clsName.input+'"><span class="'+y.clsName.button+'" id="h5tk_compareBtn_'+t.id+'"><a>\u5bf9\u6bd4</a></span><span class="'+y.clsName.more+'" id="h5tk_comparemoreBtn_'+t.id+'"><a>\u66f4\u591a</a></span><div class="'+y.clsName.alert+'" id="h5tk_compareMsg_'+t.id+'"></div>'+e+"</div>";n(t.compare_dom_id).innerHTML=i+a}function h(){w=new k,w.bind({position:t.position,input:"h5tk_compareTxt_"+t.id,"default":"\u8f93\u5165\u8bc1\u5238\u4ee3\u7801\u6216\u540d\u79f0",width:280,type:"11,12,13,14,15,31,41,71,73,81",head:["\u9009\u9879","\u7c7b\u578b","\u4ee3\u7801","\u4e2d\u6587\u540d\u79f0"],body:[-1,-2,2,4],callback:b})}function u(e,t){n(e).style.display="block",n(e).innerHTML=t,clearTimeout(x),x=setTimeout(function(){n(e).style.display="none"},F)}function p(e,a){var o=i("div"),s=i("span"),r=i("span");return o.appendChild(s),o.appendChild(r),n("h5tk_compareLabel_"+t.id).appendChild(o),s.className=y.clsName.dellist,r.className=y.clsName.item,r.style.color=a,r.innerHTML=e.name,o.setAttribute("data-symbol",e.symbol),l.addHandler(o,"click",function(){var e,i=this.getAttribute("data-symbol");if(C)for(e=0;e<C.length;e++)C[e].compare({symbol:i},!0);for(e=j.length-1;e>=0;e--)j[e].symbol==i&&(j.splice(e,1),t.color.push(t.color[e]),t.color.splice(e,1));n("h5tk_compareLabel_"+t.id).removeChild(this),j.length<=0&&(n("h5tk_compareLabel_"+t.id).style.display="none",t.delistPos&&(n("h5tk_compareTxt_"+t.id).style.width="396px"))}),o}function m(e){KKE&&KKE.api("datas.hq.get",{symbol:e},function(i){if(!i.data[0].name)return void u("h5tk_compareMsg_"+t.id,A.delist);var a=i.data[0].name.length>4?i.data[0].name.substring(0,4)+"..":i.data[0].name,o={symbol:e,name:a};if(j.push(o),p(o,t.color[j.length-1]),C)for(var l=0;l<C.length;l++)C[l].compare({symbol:e,linecolor:{K_N:t.color[j.length-1]}});n("h5tk_compareLabel_"+t.id).style.display="block",t.delistPos&&(n("h5tk_compareTxt_"+t.id).style.width="126px")})}function _(t,i){var a,n,o=e.market(t),l="http:";switch(o){case"HK":a=t.replace("rt_hk",""),a=a.replace("hk",""),n=l+"//stock.finance.sina.com.cn/hkstock/quotes/"+a+".html";break;case"US":a=t.replace("gb_",""),a=1==i?s(a):r(a),n=l+"//stock.finance.sina.com.cn/usstock/quotes/"+a+".html";break;case"OTC":a=t,n=l+"//stock.finance.sina.com.cn/thirdmarket/quotes/"+a+".html";break;case"forex":("DINIW"!=t||"USDCNY"!=t)&&(a=t.replace("fx_","")),n=l+"//finance.sina.com.cn/money/forex/hq/"+a+".shtml";break;default:a=t,n=l+"//finance.sina.com.cn/realstock/company/"+a+"/nc.shtml"}return{symbol:a,url:n}}function f(e){var i=_(e,1).symbol;void 0==i&&(i=""),n("h5tk_compareTxt_"+t.id).value=i,n("h5tk_compareTxt_"+t.id).setAttribute("data-symbol",e)}function b(e){if(f(e),e===C[0].chartUserobj.symbol)return void u("h5tk_compareMsg_"+t.id,A.added);if(!e||"\u8f93\u5165\u8bc1\u5238\u4ee3\u7801\u6216\u540d\u79f0"==e)return void u("h5tk_compareMsg_"+t.id,A.no);if(j.length>=T)return void u("h5tk_compareMsg_"+t.id,A.more);for(var i=0;i<j.length;i++)if(j[i].symbol==e)return void u("h5tk_compareMsg_"+t.id,A.added);N=e,m(e)}function g(){l.addHandler(n("h5tk_compareBtn_"+t.id),"click",function(){var e=w.stockInfo(),i=n("h5tk_compareTxt_"+t.id).getAttribute("data-symbol");if(""!==i){for(var a=0,o=0;o<e.length;o++)if(i==e[o].symbol){b(e[o].symbol),a=1;break}0==a&&b(e[0].symbol)}});var i=e.urlUtil.getMainUrl(),a=0;/.*(sina.com.cn|sina.cn).*/.test(i)&&(a=1),0==a&&(n("h5tk_comparemoreBtn_"+t.id).style.display="block"),l.addHandler(n("h5tk_comparemoreBtn_"+t.id),"click",function(){var e=_(t.userObj.symbol).url;window.open(e)})}function v(){c(),d(),h(),g()}var k=function(){this._stringOriginalUrl="//suggest3.sinajs.cn/suggest/type=@TYPE@&key=@KEY@&name=@NAME@",this._stringUrl="",this._elementScriptLoader=null,this._elementContainer=null,this._stringOriginalValue="",this._stringLastValue="",this._functionCallback=null,this._elementLineCurrent=null,this._objectHtml={},this._objectData={},this._booleanHideDelay=!1,this._stringBrowserType="",this._objectType={11:"A \u80a1",12:"B \u80a1",13:"\u6743\u8bc1",14:"\u671f\u8d27",15:"\u503a\u5238",21:"\u5f00\u57fa",22:"ETF",23:"LOF",24:"\u8d27\u57fa",25:"QDII",26:"\u5c01\u57fa",31:"\u6e2f\u80a1",32:"\u7a9d\u8f6e",33:"\u6e2f\u6307\u6570",41:"\u7f8e\u80a1",42:"\u5916\u671f",71:"\u5916\u6c47",73:"OTC",81:"\u503a\u5238",82:"\u503a\u5238"},this._objectConfig={position:null,input:null,loader:null,value:null,"default":null,type:0,max:10,width:220,link:null,target:"_blank",head:["\u9009\u9879","\u4ee3\u7801","\u540d\u79f0"],body:[-1,2,4],fix:{firefox:[1,1]},onshow:function(){},onhide:function(){},hideSelectForIE6:!1,callback:null},this._getElement=function(e){return document.getElementById(e)},this._getRandom=function(){return(new Date).getTime()},this._bind=function(e,t){var i=this;return function(){var a=null;if("undefined"!=typeof t){for(var n=0;n<arguments.length;n++)t.push(arguments[n]);a=t}else a=arguments;return e.apply(i,a)}},this._aevent=function(e,t,i){window.addEventListener?e.addEventListener(t,i,!1):window.attachEvent&&e.attachEvent("on"+t,i)},this._position=function(){var e=0,t=0,i=this._elementInput;do{if(e+=i.offsetTop||0,t+=i.offsetLeft||0,"relative"!=i.style.position)break;i=i.offsetParent}while(i);var a=[1*this._elementInput.parentNode.style.borderTopWidth.replace("px",""),1*this._elementInput.parentNode.style.borderLeftWidth.replace("px","")];__arrayPositionFix=[0,0],this._elementContainer.style.top!=e+"px"&&(this._elementContainer.style.top=e-a[0]+__arrayPositionFix[0]+"px"),this._elementContainer.style.left!=t+"px"&&(this._elementContainer.style.left=t-a[1]+__arrayPositionFix[1]+"px");var n=this._elementInput.style.borderTopWidth,o=this._elementInput.style.borderBottomWidth,l=this._elementInput.clientHeight;l+=""!=n?1*n.replace("px",""):2,l+=""!=o?1*o.replace("px",""):2,this._elementContainer.style.marginTop!=l+"px"&&(this._elementContainer.style.marginTop=l+"px")},this._getType=function(e){return{1:"stock",2:"fund",3:"hk",4:"us"}[e.substr(0,1)]},this._fill=function(){var e=this._elementInput.value;if("key_"+e in this._objectData&&""!=this._objectData["key_"+e]){null==this._elementContainer&&(this._elementContainer=document.createElement("div"),this._elementContainer.style.cssText+="display:none; filter:alpha(opacity=95); opacity:0.95; position:absolute; width:"+this._objectConfig.width+"px; z-index:999;",this._elementInput.parentNode.insertBefore(this._elementContainer,this._elementInput),this._elementContainer.suggest=this),this._position();var t="";if(t+='<table style="border-collapse:collapse; line-height:18px; border:2px solid #EEE; background-color:#FFF; font-size:12px; text-align:center; color:#999; width:'+(this._objectConfig.width-2)+'px;">',null!=this._objectConfig.head){t+='<tr style="background-color:#F3F3F3;">';for(var i in this._objectConfig.head)this._objectConfig.head.hasOwnProperty(i)&&(t+="<td>"+this._objectConfig.head[i]+"</td>");t+="</tr>"}for(var a=(this._objectData["key_"+e]||"").replace(/&amp;/g,"&").replace(/;$/,"").split(";"),n=a.length>this._objectConfig.max?this._objectConfig.max:a.length,o="parentNode.parentNode.parentNode['suggest']",i=0;n>i;i++){var l=a[i].split(",");if(l[-1]=l[0].replace(new RegExp(e.toLowerCase().replace(/(^\s*)|(\s*$)/g,"").replace(/\./g,function(e){return"\\"+e}),"gi"),function(e){return'<span style="color:#F00;">'+e+"</span>"}),l[-2]=l[1]in this._objectType?this._objectType[l[1]]:"\u2014\u2014",null==this._objectConfig.link||""==this._objectConfig.link)var s=['<td style="padding:0px;"><span style="display:block; padding:1px;">',"</span></td>"];else{var r=this._objectConfig.link.replace(/@type@/g,this._getType(l[1])||l[1]).replace(/@code@/g,this._getFullCode(l));for(var c in l)l.hasOwnProperty(c)&&(r=r.replace(new RegExp("@"+c+"@","g"),l[c]));var s=['<td style="padding:0px;"><a href="'+r+'" hidefocus="true" onmousedown="return this.parentNode.parentNode.'+o+"['hidepause'](this);\" onclick=\"return this.parentNode.parentNode."+o+'[\'hideresume\'](this);" style="color:#999; display:block; outline:none; padding:1px; text-decoration:none; width:100%;" target="'+this._objectConfig.target+'">',"</a></td>"]}t+='<tr id="'+a[i]+'" style="cursor:pointer;" onmouseover="this.'+o+"['mouseoverLine'](this);\" onmouseout=\"this."+o+"['mouseoutLine'](this);\" onmousedown=\"this."+o+"['setLineMouse'](this);\">";for(var c in this._objectConfig.body)this._objectConfig.body.hasOwnProperty(c)&&(t+=s[0]+l[this._objectConfig.body[c]]+s[1]);t+="</tr>"}t+="</table>",this._objectHtml["key_"+e]=t,this._elementLineCurrent=null,document.createElement("div"),this._elementContainer.innerHTML=this._objectHtml["key_"+e],this._show(),this._filled()}else this._hide()},this._color=function(e){var t="";e._booleanArrow&&e._booleanMouse?t="#F8FBDF":e._booleanArrow?t="#F1F5FC":e._booleanMouse&&(t="#FCFEDF"),e.style.backgroundColor!=t&&(e.style.backgroundColor=t)},this.mouseoverLine=function(e){e._booleanMouse=!0,this._color(e)},this.mouseoutLine=function(e){e._booleanMouse=!1,this._color(e)},this.setLineMouse=function(e){this.setLine(e),null!=this._functionCallback&&this._functionCallback(this._elementInput.value,e.id.split(","))},this._getFullCode=function(e){var t;switch(e[1]){case"11":case"12":case"13":case"14":case"15":case"21":case"22":case"23":case"24":case"25":case"26":return e[3];case"71":return t="DINIW"===e[2]||"USDCNY"===e[2]?e[2]:"fx_s"+e[2];case"73":return t="sb"+e[2];case"31":case"32":case"33":return t="rt_hk"+e[2];case"41":return t="gb_"+e[2];default:return e[2]}},this.setLine=function(e){var t=e.id.split(","),i=this._objectConfig.value;if(null!=i&&""!=i){for(var a=0;a<t.length;a++)i=i.replace(new RegExp("@"+a+"@","g"),t[a]);var n=i}else var n=this._getFullCode(t);for(var o=e.id,a=2;5>a;a++)this._objectData["key_"+t[a]]=o+";";this._stringLastValue=n,this._elementInput.value=n,null!=this._elementLineCurrent&&(this._elementLineCurrent._booleanArrow=!1,this._color(this._elementLineCurrent)),e._booleanArrow=!0,this._color(e),this._elementLineCurrent=e},this._show=function(){if(null!=this._elementContainer){if(this._elementContainer.style.display="",this._objectConfig.onshow(),this._objectConfig.hideSelectForIE6&&"ie6"==this._stringBrowserType)for(var e=document.getElementsByTagName("select"),t=0;t<e.length;t++)e[t].style.visibility="hidden";if(null!=this._objectConfig.position){var i=window.getComputedStyle(this._elementContainer).height;i=Number(i.replace("px","")),i&&"auto"!=i&&(this._elementContainer.style.top=-(i+26)+"px")}}},this.hidepause=function(){this._booleanHideDelay=!0},this.hideresume=function(){this._booleanHideDelay=!1,this._hideNow()},this._hide=function(){0==this._booleanHideDelay&&this._hideNow()},this._hideNow=function(){if(null!=this._elementContainer&&(this._elementContainer.style.display="none",this._objectConfig.onhide(),this._objectConfig.hideSelectForIE6&&"ie6"==this._stringBrowserType))for(var e=document.getElementsByTagName("select"),t=0;t<e.length;t++)e[t].style.visibility="visible"},this._load=function(e,t,i){null==this._elementScriptLoader&&(this._elementScriptLoader=document.createElement("div"),this._elementScriptLoader.style.display="none",this._elementInput.parentNode.insertBefore(this._elementScriptLoader,this._elementInput));var a="suggestdata_"+this._getRandom(),n=document.createElement("script");n.type="text/javascript",n.charset="gb2312",n.src=this._stringUrl.replace("@NAME@",a).replace("@KEY@",encodeURIComponent(e.toLowerCase())),n._object=this,t&&(n._functionCallbackTrue=t),i&&(n._functionCallbackFalse=i),n._stringValue=e,n._stringName=a,n[document.all?"onreadystatechange":"onload"]=function(){if(!document.all||"loaded"==this.readyState||"complete"==this.readyState){var e=window[this._stringName];"undefined"!=typeof e?(this._object._objectData["key_"+this._stringValue]=e,this._functionCallbackTrue(e),window[this._stringName]=null):this._functionCallbackFasle&&this._functionCallbackFasle(""),this._object=null,this._stringValue=null,this._stringName=null,this[document.all?"onreadystatechange":"onload"]=null,this.parentNode.removeChild(this)}},this._elementScriptLoader.appendChild(n)},this._check=function(){var e=this._elementInput.value;this._stringLastValue!=e?(this._stringLastValue=e,""!=e?"key_"+e in this._objectData?this._fill():this._load(e,this._bind(this._fill),this._bind(this._hide)):(null!=this._elementContainer&&(this._elementLineCurrent=null,this._elementContainer.innerHTML=""),this._hide())):this._show()},this._eventFocus=function(){this._elementInput.value==this._stringOriginalValue&&(this._elementInput.value=""),this._stringLastValue="",this._check()},this._eventBlur=function(){""==this._elementInput.value&&(this._elementInput.value=this._stringOriginalValue),this._stringLastValue="",this._hide()},this._eventButtonUp=function(){this._allData=this._firstData="undefined";var e=arguments[0]||window.event,t=null==this._objectConfig.head?0:1;switch(e.keyCode){case 38:null!=this._elementContainer&&null!=this._elementContainer.firstChild&&this.setLine(this._elementContainer.firstChild.rows[this._elementLineCurrent&&this._elementLineCurrent.rowIndex!=t?this._elementLineCurrent.rowIndex-1:this._elementContainer.firstChild.rows.length-1]);break;case 40:null!=this._elementContainer&&null!=this._elementContainer.firstChild&&this.setLine(this._elementContainer.firstChild.rows[this._elementLineCurrent&&this._elementLineCurrent.rowIndex!=this._elementContainer.firstChild.rows.length-1?this._elementLineCurrent.rowIndex+1:t]);break;case 13:null!=this._elementContainer&&(null!=this._elementLineCurrent&&this.setLine(this._elementLineCurrent),null!=this._functionCallback&&this._functionCallback(this._elementInput.value,this._elementLineCurrent?this._elementLineCurrent.id.split(","):[])),this._hide();break;default:this._check()}this._filled()},this._firstData="undefined",this._allData="undefined",this._filled=function(){var e=(null==this._objectConfig.head?0:1,this._objectData["key_"+this._elementInput.value]);if(e){for(var t,i,a=e.split(";"),n=[],o=0;o<a.length;o++)t=a[o].split(","),t[3]=this._getFullCode(t),i={user:t[0],type:t[1],code:t[2],symbol:t[3],name:t[4],py:t[5]},0==o&&(this._firstData=i),n.push(i);this._allData=n}},this.stockInfo=function(){return this._allData},this.getCodeFromCache=function(e){return"key_"+e in this._objectData?this._objectData["key_"+e]:void 0},this.getCode=function(e,t){"key_"+e in this._objectData?t(this._objectData["key_"+e]):this._load(e,t,t)},this.changeType=function(e){if(this._objectHtml={},this._objectData={},this._elementInput.value=this._stringOriginalValue,"undefined"!=typeof e){var t="";switch(e.toLowerCase()){case"stock":t="11,12,13,14,15";break;case"fund":t="21,22,23,24,25,26";break;case"hkstock":t="31";break;case"hk":t="31,33,32";break;case"usstock":t="41";break;case"us":t="41,42";break;case"fx":t="71";break;default:t=e}this._stringUrl=this._stringOriginalUrl.replace("@TYPE@",t)}else this._stringUrl=this._stringOriginalUrl.replace("type=@TYPE@&","");this._objectConfig.type=e},this.changeLink=function(e){this._objectConfig.link=e,this._fill(),this._hide()},this.clear=function(){this._stringLastValue=null,this._elementInput.value="",this._check(),this._elementInput.value=this._stringOriginalValue},this.bind=function(e){if("undefined"!=typeof e)for(var t in e)this._objectConfig[t]=e[t];this._elementInput="string"==typeof this._objectConfig.input?document.getElementById(this._objectConfig.input):this._objectConfig.input,null!=this._objectConfig.loader&&(this._elementScriptLoader="string"==typeof this._objectConfig.loader?document.getElementById(this._objectConfig.loader):this._objectConfig.loader),this._elementInput&&(this._stringOriginalValue=null==this._objectConfig["default"]||""==this._objectConfig["default"]?this._elementInput.value:this._objectConfig["default"],this.changeType(this._objectConfig.type),this._elementInput.value=this._stringOriginalValue,this._elementInput.setAttribute("autocomplete","off"),this._elementInput.autoComplete="off",this._aevent(this._elementInput,"focus",this._bind(this._eventFocus)),this._aevent(this._elementInput,"blur",this._bind(this._eventBlur)),this._aevent(this._elementInput,"keyup",this._bind(this._eventButtonUp)),this._aevent(this._elementInput,"mouseup",this._bind(this._eventButtonUp)),this._functionCallback=this._objectConfig.callback)}},y={clsName:{edage:"kke_compare_edage",label:"kke_compare_label",alert:"kke_compare_alert",panel:"kke_compare_panel",panel_popup:"kke_compare_panel_popup",input:"kke_compare_input",list:"kke_compare_list",dellist:"kke_compare_dellist",item:"kke_compare_item",button:"kke_compare_button",more:"kke_compare_more"},clsStyle:{edage:"{width:100%;position:relative;float:left;margin-left:10px;}",label:"{float:left;color:#1a1a1a;font-family:Microsoft Yahei,Arial;font-weight:bold;padding:0;margin:0;}",alert:"{position:absolute;display:none;top:-30px; height:25px;line-height:25px;color:#ff0000; padding-left:5px; width:190px;left:60px;border:1px solid #ccc;background:#fff;}",panel:"{float:left;}",popup:"{float:left;display:none;}",input:"{float:left;width:396px;color:#969696;font-family:Microsoft Yahei,Arial;}",list:"{height:25px; background:#FFFFFF; line-height:24px; text-align:center;margin-left:55px; display:none;}",dellist:"{background:url(//www.sinaimg.cn/cj/yw/img/bg_compare.png) #fff no-repeat 2px -20px; float:left; cursor:pointer; margin:2px 5px 2px 0;width:18px;height:18px;border:1px solid #c4cbcf;}",item:"{ float:left;margin-right:30px;margin-bottom:3px;font-size:13px;line-height:24px;text-align:center;color:#f69931;cursor:pointer;}",button:"{float:left;width:50px;text-align:center;background-color:#efefef;margin-right:2px;cursor:pointer;margin-left:1px;}",more:"{float:left;width:50px;text-align:center;background-color:#efefef;margin-right:2px;cursor:pointer;margin-left:1px;display:none;}",button_a:"{display:inline-block;width:50px;border:1px solid #d5d5d5;}",button_a_hover:"{background-color:#494949;color:#ffffff;}"},weiboclsStyle:{edage:"{width:100%;position:relative;float:left;margin-left:2px;}",label:"{float:left;color:#1a1a1a;font-family:Microsoft Yahei,Arial;font-weight:bold;padding:0;margin:0;}",alert:"{position:absolute;display:none;top:-30px; height:25px;line-height:25px;color:#ff0000; padding-left:5px; width:190px;left:36px;border:1px solid #ccc;background:#fff;}",panel:"{float:left;}",popup:"{float:left;display:none;}",input:"{float:left;width:396px;color:#969696;font-family:Microsoft Yahei,Arial;}",list:"{height:25px; background:#FFFFFF; line-height:24px; text-align:center;/*margin-left:55px;*/ display:none;}",dellist:"{background:url(//www.sinaimg.cn/cj/yw/img/bg_compare.png) #fff no-repeat 0px -22px; float:left; cursor:pointer; margin:4px 1px 2px 1px;width:14px;height:14px;border:1px solid #c4cbcf;}",item:"{ float:left;margin-right:10px;margin-bottom:3px;font-size:13px;line-height:24px;text-align:center;color:#f69931;cursor:pointer;}",button:"{float:left;width:50px;text-align:center;background-color:#efefef;margin-right:2px;cursor:pointer;margin-left:1px;}",more:"{float:left;width:50px;text-align:center;background-color:#efefef;margin-right:2px;cursor:pointer;margin-left:1px;display:none;}",button_a:"{display:inline-block;width:50px;border:1px solid #d5d5d5;}",button_a_hover:"{background-color:#494949;color:#ffffff;}"}},C=[];t=a({clsName:{edage:y.clsName.edage,normal:y.clsName.label,alert:y.clsName.alert,list:y.clsName.list,dellist:y.clsName.dellist,panel:y.clsName.panel,button:y.clsName.button,more:y.clsName.more,panel_popup:y.clsName.panel_popup},flashDom:void 0,delistPos:void 0,compare_dom_id:void 0,position:null,userObj:{symbol:"sh000001"}},t||null),t.id=t.compare_dom_id.split("_")[2],C.push(t.tkchart);var w,x,N,j=[],T=4,A={no:"\u8bf7\u9009\u62e9\u8981\u5bf9\u6bd4\u7684\u8bc1\u5238\u4ee3\u7801\u540d\u79f0\u62fc\u97f3",added:"\u5df2\u7ecf\u6dfb\u52a0\u4e86\u8be5\u8bc1\u5238",delist:"\u6b64\u8bc1\u5238\u5df2\u9000\u5e02",more:"\u6700\u591a\u53ef\u5bf9\u6bd45\u53ea\u8bc1\u5238"},F=2e3;v()}var i=e.$C,a=e.oc,n=e.$DOM,o=e.cssUtil,l=e.xh5_EvtUtil,s=e.isFunc;return new function(){this.VER="1.0.0",this.get=function(e,i){var a=new t(e);s(i)&&i(a)}}});;
xh5_define("plugins.userpanel",["utils.util"],function(e){"use strict";function t(e,t,n){n=n||{};var i=r(e),a=i.style;return n.left&&(a.left=n.left),n.right&&(a.right=n.right),n.top&&(a.top=n.top),n.bottom&&(a.bottom=n.bottom),n.width&&(a.width=n.width),n.height&&(a.height=n.height),t.appendChild(i),i}function n(e){h.preventDefault(e),h.stopPropagation(e)}function i(e){function t(t){u.save({options:{mode:"cookie",path:"/",expires:71996400},uid:[e.userObj.EXTEND_PERFIX,(new Date).getTime()].join("|"),key:e.userObj.EXTEND_PERFIX,value:t})}function n(){var t=!1;return u.load({options:"cookie",uid:[e.userObj.EXTEND_PERFIX,(new Date).getTime(),Math.floor(987654321*Math.random()+1)].join("|"),key:e.userObj.EXTEND_PERFIX},function(e){e&&(t=e)},!0),t}function i(t){if(n())return void(c=[]);var i=r("span");h.cont=i,s(t,i),d(e.userObj.dom_id).appendChild(i),a()}function a(){for(var t=r("span"),n=0;n<c.length;n++)c[n].child=t,t.style.display="none",s(c[n],t),d(e.userObj.dom_id).appendChild(t)}function o(e){for(var t=0;t<c.length;t++)c[t].child.style.display=e?"none":0==c[t].value?"block":"none"}function l(e){if(!(c.length<=0)){for(var n=0,i=0;i<c.length;i++)e.name==c[i].name&&(c[i].value=1,c[i].child.style.display="none"),1==c[i].value&&n++;n==c.length&&(h.value=c.length,h.cont.style.display="none",t("trade"))}}function s(e,t){var n=92;e.top=e.h?"1px":n+"px",t.innerHTML=e.text,t.style.color="#fff",t.style.fontFamily="\u9ed1\u4f53",t.style.background="#f00",t.style.display=e.display,t.style.width=t.style.height=t.style.lineHeight=e.radius+"px",t.style.WebkitBorderRadius=t.style.borderRadius=t.style.MozBorderRadius=e.radius/2+"px",t.style.position="absolute",t.style.styleFloat=t.style.cssFloat="right",t.style.zIndex=302,t.style.textAlign="center",t.style.right=e.right||"-3px",t.style.top=e.top||"3px"}var c=[{right:"0px",name:"trade",value:0,child:null,display:"none",text:"",radius:6}];if(e&&"cntouzi2"==e.userObj.mt)for(var p=0;p<c.length;p++);var h={value:0,cont:null};this.mainCircle=i,this.visibleChild=l,this.childDisplay=o}function a(t,n){function i(e,t){for(var n in e)e.hasOwnProperty(n)&&(e[n]=t+e[n])}var a="sinafinancehtml5settingcfgpanel",o={LOADED:"loaded",HIDE:"hide",EDIT:"edit",OPEN:"open",DRAGSTART:"dragstart",DRAGGING:"dragging"};i(o,l.CFGSETTING_IFRAME_PREFIX);var r,s,c,u,p=350,f=344,m=this,g=function(e){var t=e.data;if(t)switch(t=JSON.parse(t),t.cmd){case o.LOADED:n&&n();break;case o.HIDE:m.hide();break;case o.EDIT:var i=t.cmd.split("~")[1];s[i](t.data);break;case o.DRAGSTART:c=+r.style.left.replace(/[^0-9.]/g,""),u=+r.style.top.replace(/[^0-9.]/g,"");break;case o.DRAGGING:var a=t.data;r.style.left=c+a.movedX+"px",r.style.top=u+a.movedY+"px"}},b=function(){if(!r){var n=e.xh5_BrowserUtil.noH5?"1px solid #000":"6px solid rgba(200,200,200,0.6)";r=e.iframer({attribute:{id:a,src:t.url},style:{margin:"0 auto",height:f+"px",width:p+"px",border:n,position:"absolute",zIndex:t.z}}),h.addHandler(window,"message",g);var i=function(e){h.preventDefault(e),h.stopPropagation(e)},o=e.xh5_BrowserUtil.info.name.match(/firefox/i)?"DOMMouseScroll":"mousewheel";h.addHandler(r,o,i)}};this.sendOriginalData=function(e,t){r&&(s=t,r.contentWindow.postMessage(JSON.stringify({cmd:o.OPEN,data:e}),"*"))},this.isShow=!1,this.show=function(e){if(r){var t,n;e.changedTouches?(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):(t=e.clientX,n=e.clientY);var i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,a=d(l.dom_id).offsetWidth;n+f+30>i&&(n=Math.max(i-f-30,1)),t=t>a?t-a+(a-p)/2:(a-p)/2,r.style.left=t+"px",r.style.top=(document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop)+n+"px",r.style.display="",this.isShow=!0}},this.hide=function(){r.style.display="none",this.isShow=!1},b()}function o(o){function u(){function t(e){return["US","HK","forex"].indexOf(e)>-1}function i(e){E=!0,j=+w.left.replace(/[^0-9.]/g,""),H=+w.top.replace(/[^0-9.]/g,""),e.targetTouches?(L=e.targetTouches[0].clientX,S=e.targetTouches[0].clientY):(L=e.clientX,S=e.clientY)}function a(e){N.cursor="move",E&&(e.targetTouches?(D=e.targetTouches[0].clientX-L,P=e.targetTouches[0].clientY-S):(D=e.clientX-L,P=e.clientY-S),w.left=+j+ +D+"px",w.top=+H+ +P+"px",h.stopPropagation(e)),h.preventDefault(e)}function s(){E=!1,N.cursor=""}function d(e){for(var t=_.length;t--;)if(_[t].value==e)return t}function c(e,t,n,i){var a=r("div"),o=a.style;a.title=e,o["float"]="left",o.width="26px",o.height="26px",o.margin="2px",o.border="1px solid #D7DDEB",o.overflow="hidden",I.appendChild(a);var l=r("select"),s=l.style;s.width="45px",s.height="26px",s.lineHeight="26px",s.margin=0,s.outline="none",s.border="none",s.cursor="pointer",s.textAlign="start",s.font="18px \u5fae\u8f6f\u96c5\u9ed1",s.color="#747574",s.background="white";for(var d=0,c=t.length;c>d;d++){var u=r("option");u.value=t[d],u.innerHTML=n[d],i(t[d],u),l.appendChild(u)}return a.appendChild(l),l}function u(e,t){h.addHandler(e,"click",n),e.style.cursor="not-allowed",e.style.backgroundPosition=t.normalPos,t.value==y.param.paintTool&&y.setPaintTool("Close")}function p(e){h.removeHandler(e,"click",n),e.style.cursor="pointer"}function f(e){for(var t=I.querySelectorAll("li"),n=t.length;n--;)for(var i=_.length;i--;)if(_[i].value==t[n].getAttribute("value")){_[i].konly&&(e?u(t[n],_[i]):p(t[n]));break}}var m=t(l.market),g="//n.sinaimg.cn/finance/chartimg/painttool_icons.png",b=M?e.getSUrl(g):g,v=b+"?20160713",_=[{name:"\u7ebf\u6bb5",value:"Segment",normalPos:"-37px -35px",lightPos:"-173px -35px"},{name:"\u76f4\u7ebf",value:"Line",normalPos:"-68px -35px",lightPos:"-204px -35px"},{name:"\u6c34\u5e73\u7ebf",value:"Level",normalPos:"-6px -97px",lightPos:"-142px -97px"},{name:"\u5e73\u884c\u7ebf",value:"ParallelLine",normalPos:"-6px -66px",lightPos:"-142px -66px"},{name:"\u5e73\u884c\u7ebf\u6bb5",value:"ParallelSegment",normalPos:"-6px -190px",lightPos:"-142px -190px"},{name:"\u6ce2\u6d6a\u7ebf",value:"Wave",normalPos:"-6px -252px",lightPos:"-142px -252px"},{name:"\u77e9\u5f62",value:"Rect",normalPos:"-68px -66px",lightPos:"-204px -66px"},{name:"\u5e73\u884c\u56db\u8fb9\u5f62",value:"Parallelogram",normalPos:"-37px -190px",lightPos:"-173px -190px"},{name:"\u4e09\u89d2\u5f62",value:"Triangle",normalPos:"-37px -252px",lightPos:"-173px -252px"},{name:"\u5468\u671f\u7ebf",value:"CycleLine",normalPos:"-37px -66px",lightPos:"-173px -66px"},{name:"\u6590\u6ce2\u90a3\u5951\u5468\u671f\u7ebf",value:"Fibonacci",normalPos:"-68px -190px",lightPos:"-204px -190px"},{name:"\u7ebf\u6027\u56de\u5f52\u5e26(K\u7ebf)",value:"LinearRegressionBand",normalPos:"-6px -221px",lightPos:"-142px -221px",konly:!0},{name:"\u9ec4\u91d1\u7ebf",value:"GoldenSection",normalPos:"-37px -221px",lightPos:"-173px -221px"},{name:"\u767e\u5206\u6bd4\u7ebf",value:"PercentLine",normalPos:"-68px -221px",lightPos:"-204px -221px"},{name:"\u6d4b\u91cf\u5c3a",value:"Ruler",normalPos:"-6px -159px",lightPos:"-142px -159px"},{name:"\u4e0a\u7bad\u5934",value:m?"GreenUpArrow":"RedUpArrow",normalPos:"-68px -128px",lightPos:"-204px -128px"},{name:"\u4e0b\u7bad\u5934",value:m?"RedDownArrow":"GreenDownArrow",normalPos:"-37px -128px",lightPos:"-173px -128px"},{name:"\u81ea\u7531\u7bad\u5934",value:"FreeArrow",normalPos:"-68px -252px",lightPos:"-204px -252px"},{name:"\u505c\u6b62\u753b\u56fe",value:"Close",normalPos:"-6px -35px",lightPos:"-142px -35px",once:!0},{name:"\u7f16\u8f91\u56fe\u5f62",value:"Edit",normalPos:"-37px -97px",lightPos:"-173px -97px"},{name:"\u6587\u672c",value:"Write",normalPos:"-68px -97px",lightPos:"-204px -97px"},{name:"\u64a4\u9500",value:"Revoke",normalPos:"-6px -128px",lightPos:"-6px -128px",once:!0},{name:"\u5220\u9664\u9009\u4e2d",value:"Delete",normalPos:"-37px -159px",lightPos:"-173px -159px"},{name:"\u6e05\u7a7a",value:"Empty",normalPos:"-68px -159px",lightPos:"-204px -159px",once:!0}],x=this,y=l.paintTool,k=r("div"),w=k.style;w.position="absolute",w.width="102px",w.left="100px",w.top="100px",w.zIndex=8890;var C=r("div"),N=C.style;N["float"]="left",N.width="100%",N.height="30px",N.lineHeight="30px",N.border="1px solid #A7BEE4",N.boxSizing="border-box",N.mozBoxSizing="border-box",N.webkitBoxSizing="border-box",N.fontSize="14px",N.textIndent="5px",N.backgroundColor="#CFDEF6",N.color="#3D5E96",N.webkitUserSelect="none",N.mozUserSelect="none",N.userSelect="none",C.innerHTML="\u753b\u56fe\u5de5\u5177";var T=r("span"),A=T.style;A.position="absolute",A.height="16px",A.width="16px",A.right="4px",A.top="7px",A.background="url("+v+") -81px -7px no-repeat",A.color="#759ADC",T.title="\u5173\u95ed",T.setAttribute("value","Close"),h.addHandler(T,"mousemove",function(e){e.target.style.cursor="pointer",h.stopPropagation(e)}),h.addHandler(T,"click",function(e){x.hide(),h.stopPropagation(e)}),C.appendChild(T);var j,H,L,S,D,P,E=!1;"ontouchend"in window&&(h.addHandler(C,"touchstart",i),h.addHandler(C,"touchmove",a),h.addHandler(C,"touchend",s)),h.addHandler(C,"mousedown",i),h.addHandler(C,"mousemove",a),h.addHandler(C,"mouseup",s),h.addHandler(C,"mouseout",s),k.appendChild(C);var I=r("ul"),F=I.style;F["float"]="left",F.top="30px",F.width="100%",F.border="1px solid #D7DCEB",F.padding="4px 2px 4px 2px",F.backgroundColor="#EEF3FD",F.boxSizing="border-box",F.mozBoxSizing="border-box",F.webkitBoxSizing="border-box",F.listStyle="none",F.overflow="hidden",F.margin=0;var K=null;h.addHandler(I,"click",function(e){if("LI"==e.target.tagName){var t,n,i,a=e.target,o=a.style,l=a.getAttribute("value"),r=d(l);if("undefined"!=typeof r)return K&&(t=d(K.getAttribute("value")),"undefined"!=typeof t&&(i=_[t])),n=_[r],l?void(K?a==K?n.once?y.setPaintTool(l):(o.backgroundPosition=n.normalPos,y.setPaintTool("Close"),K=null):(i&&(K.style.backgroundPosition=i.normalPos),y.setPaintTool(l),n.once?(y.setPaintTool("Close"),K=null):(o.backgroundPosition=n.lightPos,K=a)):(y.setPaintTool(l),n.once?y.setPaintTool("Close"):(o.backgroundPosition=n.lightPos,K=a))):(i&&(K.style.backgroundPosition=i.normalPos),K=null,void y.setPaintTool("Close"))}});for(var O=0,R=_.length;R>O;O++){var B=r("li"),U=B.style;U["float"]="left",U.width="28px",U.height="28px",U.margin="2px",U.backgroundImage="url("+v+")",U.backgroundRepeat="no-repeat",U.backgroundPosition=_[O].normalPos,_[O].value&&(B.title=_[O].name,B.setAttribute("value",_[O].value),B.setAttribute("selected","false"),h.addHandler(B,"mouseover",function(e){F.cursor="pointer",e.target.style.boxShadow="2px 2px 2px #AEC7E3"}),h.addHandler(B,"mouseout",function(e){F.cursor="",e.target.style.boxShadow=""})),I.appendChild(B)}var z=r("div"),V=z.style;z.title="\u989c\u8272",V["float"]="left",V.border="2px solid #D7DDEB",V.width="24px",V.height="24px",V.margin="2px",V.backgroundColor=y.param.style.strokeStyle,h.addHandler(z,"click",function(t){e.colorPicker.show(t.pageX-e.colorPicker.param.width/2,t.pageY,this,V.backgroundColor)}),h.addHandler(z,"mouseover",function(){V.cursor="pointer"}),e.colorPicker.al("ok",function(){z==arguments[1][1]&&(V.backgroundColor=arguments[1][0].rgb,y.setStyle({strokeStyle:arguments[1][0].rgb}))}),I.appendChild(z);var X=c("\u5b57\u53f7",["12px","18px","24px"],["\u5c0f","\u4e2d","\u5927"],function(e,t){var n=y.param.style.font;n.match(e)&&t.setAttribute("selected","true")});h.addHandler(X,"change",function(){y.setStyle({font:y.param.style.font.replace(/[\s\S]+px/,X.value)})});var $=c("\u7ebf\u5bbd",[1,2,4],["\u7ec6","\u4e2d","\u7c97"],function(e,t){var n=y.param.style.lineWidth;n==e&&t.setAttribute("selected","true")});h.addHandler($,"change",function(){y.setStyle({lineWidth:$.value})}),k.appendChild(I),w.display="none",document.body.appendChild(k),o.menu.al("KKE_MENU_CLICK_TAB",function(){x.isShow&&f("T"==o.menu.chooseTab.tye)}),this.isShow=!1,this.show=function(e,t){this.isShow||("undefined"!=typeof e&&(w.left=e+"px"),"undefined"!=typeof t&&(w.top=t+"px"),w.display="",this.isShow=!0,f("T"==o.menu.chooseTab.tye))},this.hide=function(){w.display="none",y.setPaintTool("Close");var t;K&&(t=d(K.getAttribute("value"))),e.isNum(t)&&(K.style.backgroundPosition=_[t].normalPos,K=null),this.isShow=!1}}function m(){function t(){var e=o.chart.tChart||o.chart.kChart;return e.getSymbols()[0]}function n(){var e=f.load(I);return e?JSON.parse(e):void 0}function i(){var e=o.chart.tChart||o.chart.kChart;return e.getCurrentData()&&(e.getCurrentData().price||e.getCurrentData().close)}function a(){for(var e=i(),t=0,n=0,a=0,o=0,l=0,r=0,s=ce.childNodes,d=1,c=s.length;c>d;d++){var u=s[d].childNodes,p=Number(u[4].innerHTML);p&&("buy"==u[1].childNodes[0].value?(t+=p,n+=+u[3].childNodes[0].value):(t-=p,n-=+u[3].childNodes[0].value))}n?(a=e*n-t,o=e-a/Math.abs(n),l=o>0?(e-o)/o*100:0,r=e*n):a=-t,he.childNodes[0].innerHTML=n,he.childNodes[1].innerHTML=o.toFixed(3),he.childNodes[2].innerHTML=e,he.childNodes[3].innerHTML=l.toFixed(2),he.childNodes[4].innerHTML=a.toFixed(2),he.childNodes[5].innerHTML=r.toFixed(2),v()}function s(e){ee=!0,W=+B.left.replace(/[^0-9.]/g,""),G=+B.top.replace(/[^0-9.]/g,""),e.targetTouches?(q=e.targetTouches[0].clientX,J=e.targetTouches[0].clientY):(q=e.clientX,J=e.clientY)}function d(e){z.cursor="move",ee&&(e.targetTouches?(Z=e.targetTouches[0].clientX-q,Q=e.targetTouches[0].clientY-J):(Z=e.clientX-q,Q=e.clientY-J),B.left=+W+ +Z+"px",B.top=+G+ +Q+"px",h.stopPropagation(e)),h.preventDefault(e)}function c(){ee=!1,z.cursor=""}function u(e){var t=r("span"),n=t.style;return n.width="42px",n.height="24px",n.textAlign="center",n.font=M,n.lineHeight="24px",n.cursor="pointer",n.margin="8px 10px 0 0",n.textIndent=0,n["float"]="right",n.color="#494949",n.backgroundColor="#E4E4E4",n.borderRadius="2px",t.innerHTML=e,h.addHandler(t,"mouseover",function(){n.color="#fff",n.backgroundColor="#628BD2"}),h.addHandler(t,"mouseout",function(){n.color="#494949",n.backgroundColor="#E4E4E4"}),t}function p(){for(var e=[],t=ce.childNodes,n=!1,i=1,a=t.length;a>i;i++){var o=t[i].childNodes,l=Number(o[4].innerHTML);if(l){for(var r=[],s=0;4>s;s++)r.push(o[s].childNodes[0].value);e.push(r),n=!0}}return n?{ifShow:le.checked,data:e,count:{allVolume:he.childNodes[0].innerHTML,costPrice:he.childNodes[1].innerHTML,nowPrice:he.childNodes[2].innerHTML,profitPercent:he.childNodes[3].innerHTML,profit:he.childNodes[4].innerHTML,marketValue:he.childNodes[5].innerHTML},date:+new Date}:void 0}function m(e,t){return e.toDateString()==t.toDateString()}function g(e){var t=o.chart.kChart;if(t){for(var n=t.getExtraData({name:"currentK",clone:!1}),i=[],a=[],l=0,r=e.length;r>l;l++)for(var s=new Date(+new Date(e[l][0])+576e5-1),d=n.length;d--;){if(m(n[d].date,s)){"buy"==e[l][1]?i.push([[d,e[l][2]]]):a.push([[d,e[l][2]]]);break}if(n[d].date<s)break}return{buy:i,sell:a}}}function b(e){!e&&(e=t()+"|23"),l.paintTool.empty(e,"buyandsell")}function v(){if(l.paintTool&&l.paintTool.param){var e=t()+"|23",i=t()+"|t";b(e),b(i);var a=l.paintTool.param.shapeListName;if(a==e||a==i){if(F.isShow&&le.checked||!F.isShow){var o=F.isShow?p():n();if(o&&o.ifShow)if(a==e){var r=g(o.data);r&&(l.paintTool.addShapeList(e,"buyandsell","UpArrow",r.buy,{fillStyle:"red"}),l.paintTool.addShapeList(e,"buyandsell","DownArrow",r.sell,{fillStyle:"green"}),l.paintTool.addShapeList(e,"buyandsell","Level",[[[0,+o.count.costPrice]]],{strokeStyle:"black"}))}else l.paintTool.addShapeList(i,"buyandsell","Level",[[[0,+o.count.costPrice]]],{strokeStyle:"black"})}l.paintTool.paint()}}}function _(){var e=r("table"),t=e.style;return t.width="100%",t.textAlign="center",t.borderCollapse="collapse",e.border="0",e.cellpadding="0",e.cellspacing="0",e}function x(e){var t=r("td"),n=t.style;if(n.border="solid 1px #e5e5e5",n.textAlign="center",n.font=M,e&&e.length)for(var i=0,a=e.length;a>i;i++)t.appendChild(e[i]);return t}function y(e){var t=r("tr"),n=t.style;n.height="30px",n.background="#eef1f8";for(var i=0,a=e.length;a>i;i++){var o=r("th"),l=o.style;l.font=K,l.border="solid 1px #e5e5e5",l.textAlign="center",o.innerHTML=e[i],t.appendChild(o)}return t}function k(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return 10>t&&(t="0"+t),10>n&&(n="0"+n),[e.getFullYear(),t,n].join("-")}function w(e){e.font=M,e.textAlign="center",e.border="none",e.outline="none"}function C(e,t,n,i){for(var a=0,o=t.length;o>a;a++){var l=r("option");l.value=t[a][0],n==t[a][0]&&(l.selected=!0),l.innerHTML=t[a][1],l.style.font=i,e.appendChild(l)}}function N(){var e=r("span"),t=e.style;return t.display="inline-block",t.width="16px",t.height="16px",t.lineHeight="16px",t.margin="2px",t.borderRadius="2px",t.color="#fff",t.backgroundColor="#628BD2",t.cursor="pointer",t.userSelect="none",t.webkitUserSelect="none",t.msUserSelect="none",t.mosUserSelect="none",e}function T(e){var t=h.getEvent(e).target.parentNode.parentNode;t.nextSibling?ce.insertBefore(H(),t.nextSibling):ce.appendChild(H())}function A(){var e=ce.childNodes[1];if(e){for(var t=e.querySelectorAll("input"),n=t.length;n--;)t[n].value=0==n?k():"";e.childNodes[4].innerHTML=""}else ce.appendChild(H())}function j(e){var t=h.getEvent(e).target.parentNode.parentNode;ce.childNodes.length>2?ce.removeChild(t):A(),a()}function H(e){function t(){g.innerHTML=(u.value*f.value).toFixed(2)}function n(){t(),a()}var i=r("tr"),o=i.style;o.height="24px";var l=r("input"),s=l.style;w(s),l.setAttribute("type","date"),l.setAttribute("value",e?e[0]:k()),s.width="120px",h.addHandler(l,"input",function(e){var t=h.getEvent(e).target;t.value=t.value.replace(/[^\d-]/g,"").split(/-+/).slice(0,3).join("-"),v()}),i.appendChild(x([l]));var d=r("select"),c=d.style;w(c),C(d,[["buy","\u4e70\u5165"],["sell","\u5356\u51fa"]],e?e[1]:"",M),h.addHandler(d,"change",a),i.appendChild(x([d]));var u=r("input"),p=u.style;w(p),u.setAttribute("step","0.01"),u.setAttribute("min","0"),u.setAttribute("max","99999"),p.width="60px",e&&(u.value=e[2]),h.addHandler(u,"input",function(e){var t=h.getEvent(e).target;t.value=t.value.replace(/[^\d\.]/g,"").split(/\.+/).slice(0,2).join("."),t.value>99999&&(t.value=99999)}),i.appendChild(x([u]));var f=r("input"),m=f.style;w(m),f.setAttribute("step","1"),f.setAttribute("min","0"),f.setAttribute("max","9999999999999"),m.width="100px",e&&(f.value=e[3]),h.addHandler(f,"input",function(e){var t=h.getEvent(e).target;t.value=t.value.replace(/[^\d]/g,""),t.value>9999999999999&&(t.value=9999999999999)}),i.appendChild(x([f]));var g=x();g.style.font=M,i.appendChild(g),e&&t(),h.addHandler(u,"input",n),h.addHandler(f,"input",n);var b=N();b.innerHTML="+",h.addHandler(b,"click",T);var _=N();return _.innerHTML="-",h.addHandler(_,"click",j),i.appendChild(x([b,_])),i}function L(){var e=n();e?(D(),P(e),le.checked=e.ifShow):A(),a()}function S(e){h.removeHandler(e.childNodes[5].childNodes[0],"click",T),h.removeHandler(e.childNodes[5].childNodes[1],"click",j)}function D(){for(var e=ce.childNodes,t=e.length-1;t>0;t--)S(e[t]),ce.removeChild(e[t])}function P(e){for(var t=e.data,n=0,i=t.length;i>n;n++)ce.appendChild(H(t[n]))}function E(){var e=i();e!=ge&&(a(),ge=e)}var I="sinatkchart_tradehistory_"+t(),F=this,M="12px Arial",K="14px Arial",O=1e3,R=r("div"),B=R.style;B.position="absolute",B.width="580px",B.maxHeight="400px",B.overflow="hidden",B.left="100px",B.top="100px",B.zIndex=8891,B.background="#fff",B.border="6px solid rgba(200, 200, 200, 0.6)";var U=r("div"),z=U.style;z.height="40px",z.width="100%",z.backgroundColor="#fff",z.fontSize="16px",z.fontWeight="bold",z.textIndent="10px",z.lineHeight="44px",U.innerHTML="\u4ea4\u6613\u65e5\u5fd7",R.appendChild(U);var V=document.createElement("span"),X=V.style;X.display="inline-block",X.lineHeight="12px",X.width="12px",X.height="12px",X.border="1px solid #628BD2",X.color="#628BD2",X.borderRadius="12px",X.fontSize="12px",X.cursor="help",X.textAlign="left",X.marginLeft="5px",X.textIndent="3px",V.innerHTML="?",U.appendChild(V);var $=document.createElement("div"),Y=$.style;Y.display="none",Y.position="absolute",Y.width="240px",Y.left="5px",Y.top="35px",Y.padding="5px",Y.border="1px solid #AEC7E3",Y.zIndex="99999",Y.fontSize="12px",Y.fontWeight="normal",Y.lineHeight="14px",Y.backgroundColor="#fff",Y.boxShadow="2px 2px 2px #AEC7E3",U.appendChild($),h.addHandler(V,"mouseover",function(e){var t=e?e.target||e.srcElement:null;t&&($.style.display="",$.innerHTML="\u201c\u4ea4\u6613\u65e5\u5fd7\u201d\u529f\u80fd\u4f7f\u60a8\u5728\u65e5K\u7ebf\u56fe\u4e2d\u53ef\u89c6\u5316\u7684\u67e5\u770b\u6301\u4ed3\u6210\u672c\u7ebf\u4e0e\u6700\u65b0\u80a1\u4ef7\u7684\u8ddd\u79bb\u3002\u540c\u65f6\uff0c\u60a8\u4e5f\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0\u4e00\u7b14\u201c\u4e70\u5165/\u5356\u51fa\u201d\u64cd\u4f5c\uff0c\u5728\u56fe\u8868\u4e0b\u65b9\u7684\u6c47\u603b\u680f\u4e2d\u5feb\u901f\u770b\u5230\u6b64\u64cd\u4f5c\u540e\u6210\u672c\u4ef7\u3001\u76c8\u4e8f\u6bd4\u7b49\u7684\u53d8\u5316\u60c5\u51b5\uff08\u672a\u8ba1\u7b97\u4f63\u91d1\u548c\u7a0e\u7387\uff09\uff0c\u4e3a\u60a8\u505a\u51fa\u4ea4\u6613\u51b3\u7b56\u63d0\u4f9b\u4fbf\u5229\u3002")}),h.addHandler(V,"mouseout",function(){$.style.display="none"});var W,G,q,J,Z,Q,ee=!1;"ontouchend"in window&&(h.addHandler(U,"touchstart",s),h.addHandler(U,"touchmove",d),h.addHandler(U,"touchend",c)),h.addHandler(U,"mousedown",s),h.addHandler(U,"mousemove",d),h.addHandler(U,"mouseup",c),h.addHandler(U,"mouseout",c);var te=u("\u786e\u5b9a");h.addHandler(te,"click",function(){F.hide();var t=p();t?(f.save(I,t),SUDA.uaTrack("chart_tradelog",l.symbol+"$$$$"+JSON.stringify(t)),e.suda("tradelog")):f.remove(I),v()}),U.appendChild(te);var ne=u("\u53d6\u6d88");h.addHandler(ne,"click",function(){F.hide(),v()}),U.appendChild(ne);var ie=u("\u6e05\u7a7a");h.addHandler(ie,"click",function(){D(),A(),a()}),U.appendChild(ie);var ae=r("label"),oe=ae.style;oe["float"]="right",oe.font=M,oe.margin="12px 10px 0 0",oe.textIndent="0",oe.cursor="pointer",ae.innerHTML="\u7ed8\u5236\u4ea4\u6613\u70b9";var le=r("input"),re=le.style;le.type="checkbox",re.margin="1px",re.verticalAlign="bottom",re["float"]="left",le.checked=!0,h.addHandler(le,"change",v),ae.appendChild(le),U.appendChild(ae);var se=r("div"),de=se.style;de.width="100%",de.maxHeight="305px",de.overflow="auto",R.appendChild(se);var ce=_();se.appendChild(ce),ce.appendChild(y(["\u65e5\u671f","\u7c7b\u578b","\u6210\u4ea4\u4ef7","\u6210\u4ea4\u91cf","\u6210\u4ea4\u989d","\u64cd\u4f5c"]));var ue=_(),pe=["\u6301\u4ed3\u91cf","\u6210\u672c\u4ef7","\u5e02\u4ef7","\u76c8\u4e8f\u6bd4(%)","\u76c8\u4e8f","\u5e02\u503c"],he=r("tr");he.style.height="24px";for(var fe=pe.length;fe--;)he.appendChild(x());ue.appendChild(y(pe)),ue.appendChild(he),R.appendChild(ue),L(),B.display="none",document.body.appendChild(R);var me,ge=i();this.isShow=!1,this.show=function(e,t){this.isShow||(L(),"undefined"!=typeof e&&(B.left=e+"px"),"undefined"!=typeof t&&(B.top=t+"px"),B.display="",this.isShow=!0,me=setInterval(E,O))},this.hide=function(){B.display="none",this.isShow=!1,clearInterval(me)},this.repaint=v}function b(e,t){(23==t||"t"==t)&&(H||(H=new m),H.repaint())}function v(){o=s({className:$.className,css:$.classStyle},o||null)}function _(){var e="."+o.className.ctn+o.css.ctn,t="."+o.className.fullscreen+o.css.fullscreen,n="."+o.className.fullscreen+":hover"+o.css.hover,i="."+o.className.more+o.css.more,a="."+o.className.more+":hover"+o.css.hover,l=e+i+a+t+n;p.inject(l)}function x(){var t=r("div");t.className=o.className.ctn,d(o.userObj.dom_id).appendChild(t);var i,a=["click","touchend"];for(X=r("div"),X.title="\u5168\u5c4f\u67e5\u770b",X.className=o.className.fullscreen,i=a.length;i--;)h.addHandler(X,a[i],k);if(!e.xh5_BrowserUtil.noH5){var l;try{l=document.location.href}catch(s){}l&&t.appendChild(X)}var c=r("div");c.title="\u66f4\u591a",c.className=o.className.more;var u=new U(d(o.userObj.dom_id),o);for(i=a.length;i--;)h.addHandler(c,a[i],function(e){h.preventDefault(e),u.isshow?u.hide():u.show()});t.appendChild(c),V=r("div"),V.style.width="100%",V.style.height="100%",V.style.backgroundColor=e.xh5_BrowserUtil.noH5?"#000":"rgba(0,0,0, 0.7)",V.style.position="fixed",V.style.zIndex=8888,V.style.display="none",V.style.top=0,V.style.left=0,h.addHandler(V,"mousewheel",n),h.addHandler(V,"DOMMouseScroll",n),z=r("div"),z.style.backgroundColor="#fff",z.style.width="96%",z.style.height="98%",z.style.top="1%",z.style.left="2%",z.style.zIndex=8889,z.style.position="fixed",z.style.textAlign="left",h.addHandler(z,"mousewheel",n),h.addHandler(z,"DOMMouseScroll",n)}function y(){o.userObj.mt&&"cntouzi2"==o.userObj.mt&&e.suda("touzi_pc_v2_market_today_16",null,"touzi_pc_v2_market_today")}function k(t){h.preventDefault(t),G||(G=!0,document.body.appendChild(V),document.body.appendChild(z)),W?(X.title="\u5168\u5c4f\u67e5\u770b",X.style.background='url("'+R+'") no-repeat 0px -24px',V.style.display=z.style.display="none",Y.insertBefore(d(o.userObj.dom_id),Y.firstChild)):(X.title="\u9000\u51fa\u5168\u5c4f",X.style.background='url("'+R+'") no-repeat -1px 0px',V.style.display=z.style.display="",z.appendChild(d(o.userObj.dom_id)),e.suda("tool_fullscreen"),y()),o.chart&&o.chart.onresize(),W=!W}function w(e){return/^sh020\d{3}$/.test(e)?"bond":/^sz108\d{3}$/.test(e)?"bond":/^sh(009|010)\d{3}$/.test(e)?"bond":/^sz10\d{4}$/.test(e)?"bond":/^sh(100|110|112|113)\d{3}$/.test(e)?"bond":/^sz12\d{4}$/.test(e)?"bond":/^sh(105|120|129|139)\d{3}$/.test(e)?"bond":/^sz11\d{4}$/.test(e)?"bond":"CN"}function C(){var t,n="";switch(o.menu.chooseTab.tab){case"t1":case"ts":t="1\u65e5";break;case"t5":t="5\u65e5";break;case"kd":t="\u65e5K";break;case"kw":t="\u5468K";break;case"km":t="\u6708K";break;case"k5":t="5\u5206\u949fK";break;case"k15":t="15\u5206\u949fK";break;case"k30":t="30\u5206\u949fK";break;case"k60":t="60\u5206\u949fK";break;case"kdd":t="\u591a\u7a7a\u65e5K";break;case"YTD":t="\u4eca\u5e74\u4ee5\u6765\u5e74";break;case"km1":t="\u4e00\u6708\u5e74";break;case"km3":t="\u4e09\u6708\u5e74";break;case"km12":t="\u4e00\u5e74\u5e74";break;case"kcl":t="\u5e74";break;default:t=""}var i,a,l=o.userObj.symbol,r=e.market(l);switch(r){case"CN":a=l,i="bond"==w(l)?"//money.finance.sina.com.cn/bond/quotes/"+l+".html":"//finance.sina.com.cn/realstock/company/"+l+"/nc.shtml";break;case"US":a=l.replace("gb_",""),a=a.replace("$",""),i="//stock.finance.sina.com.cn/usstock/quotes/"+a+".html";break;case"OTC":a=l.replace("sb",""),i="//stock.finance.sina.com.cn/thirdmarket/quotes/"+l+".html";break;case"HK":a=l.replace("rt_hk",""),a=l.replace("hk",""),i="//stock.finance.sina.com.cn/hkstock/quotes/"+a+".html";break;default:i="//finance.sina.com.cn",a=l}var s="#\u65b0\u6d6a\u8d22\u7ecf\u884c\u60c5\u56fe#";switch(o.menu.chooseTab.tye){case"T":o.chart.tChart.shareTo({url:i,wbtext:s+n+"(#"+a+"#)\u884c\u60c5\u8d70\u52bf_"+t+"\u5206\u65f6"});break;case"K":o.chart.kChart.shareTo({url:i,wbtext:s+n+"(#"+a+"#)\u884c\u60c5\u8d70\u52bf_"+t+"\u7ebf"});break;default:o.chart.tChart.shareTo({url:i,wbtext:s+n+"(#"+a+"#)\u884c\u60c5\u8d70\u52bf"})}}function N(e){q=new i(e);var t=55;e&&"cntouzi2"==e.userObj.mt&&(t=65),q.mainCircle({h:t,display:"block",text:1,radius:15})}function T(){v(),o.userObj.dom_id&&(_(),x(),N(o))}var A,j,H,L=!1,S={edit:function(e){L=!1,o.chart.setTKChart(e)}},D=function(t){A?(A.sendOriginalData(l.settingCfg,S),A.isShow?A.hide():(e.suda("tool_setting"),A.show(t))):A=new a({url:g,z:9999},c(D,null,t)),L=!0},P=function(t){j||(j=new u,o.chart&&l.paintTool&&(o.chart.paintTool=l.paintTool)),j.isShow?j.hide():(e.suda("tool_painter"),j.show(t.pageX+102<document.body.offsetWidth?t.pageX+20:t.pageX-122,t.pageY-65))};o.chart.al("PAINTTOOL_VIEW_CHANGEED",b);var E=function(){H||(H=new m),H.isShow?H.hide():(e.suda("tool_trade"),H.show(window.innerWidth/2-290,window.scrollY+window.innerHeight/2-120))},I=function(){var t=navigator.userAgent||"",n=e.urlUtil.getMainUrl(),i="wangxuan2@staff.sina.com.cn?cc=yangwen@staff.sina.com.cn",a=encodeURIComponent("\u884c\u60c5\u56fe\u610f\u89c1\u53cd\u9988"),o=encodeURIComponent("\u3010\u9644\u52a0\u4fe1\u606f\uff0c\u4fbf\u4e8e\u8c03\u8bd5\uff1a\u201c\u8bbf\u95ee\u9875\u9762\u5730\u5740\uff1a"+n+" \u6d4f\u89c8\u5668\u4fe1\u606f\uff1a"+t+"\u201d\u3011\u5982\u60a8\u6709\u4efb\u4f55\u7591\u95ee\u3001\u610f\u89c1\u548c\u5efa\u8bae\uff0c\u53ef\u901a\u8fc7\u7535\u5b50\u90ae\u4ef6\u7684\u65b9\u5f0f\u4e0e\u6211\u4eec\u5efa\u7acb\u8054\u7cfb\uff1a"),l=["mailto:",i,"&subject=",a,"&body=",o].join("");window.open(l,"_blank")},F={weibo:C,qrcode:function(e,t){switch(t.menu.chooseTab.tye){case"K":o.chart.kChart.shareTo({type:"qrcode"});break;default:case"T":o.chart.tChart.shareTo({type:"qrcode"})}},painter:P,trade:E,setting:D,contact:I},M=0==location.protocol.indexOf("https:")?!0:!1,K=[{title:"\u504f\u597d\u8bbe\u7f6e",p:"setting"}];e.xh5_BrowserUtil.noH5||(K=K.concat([{title:"\u753b\u56fe\u5de5\u5177",p:"painter"},{title:"\u4ea4\u6613\u65e5\u5fd7",p:"trade"},{title:"\u5206\u4eab\u5230\u5fae\u535a",p:"weibo"},{title:"\u626b\u63cf\u4e8c\u7ef4\u7801",p:"qrcode"}]));var O="//n.sinaimg.cn/finance/chartimg/chart_setting_icons.png?2017",R=M?e.getSUrl(O):O,B={show:!1,zIndex:301,backgroundColor:"#fff",toolList:K,toolBox:{right:"1px",top:"31px"},toolItem:{width:"30px",height:"29px"},toolListBG:{setting:'url("'+R+'") no-repeat 4px -115px',painter:'url("'+R+'") no-repeat 3px -167px',trade:'url("'+R+'") no-repeat 4px -195px',weibo:'url("'+R+'") no-repeat 3px -44px',qrcode:'url("'+R+'") no-repeat 3px -92px',contact:'url("'+R+'") no-repeat 3px -44px'}},U=function(e,t){this.parent=e,this.param=s(B,t||null),this._init()};U.prototype={constructor:U,_init:function(){var n=this,i=this.param,a=this.parent,o=t("div",a,i.toolBox),l=o.style,r=i.toolList;l.cursor="pointer",l.position="absolute",l.zIndex=i.zIndex,l.backgroundColor=i.backgroundColor,l.display=i.show?"":"none",this.isshow=i.show,this.wrap=o;for(var s=0,d=r.length;d>s;s++){var c=r[s],u=c.p;if(u in F){var p=t("div",o,i.toolItem);p.title=c.title;var f=p.style;0==s&&(f.borderTop="1px solid #dde4f4"),f.borderRight=f.borderBottom=f.borderLeft="1px solid #dde4f4",f.background=i.toolListBG[u],f.backgroundColor="#f7f7f7",p.setAttribute("tool-type",u)}}h.addHandler(o,"click",function(t){var a=F,o=h.getTarget(t).getAttribute("tool-type");("weibo"==o||"qrcode"==o)&&e.suda("tool_"+o),q.visibleChild({name:o}),a[o]&&a[o](t,i),n.hide()}),h.addHandler(o,"mouseover",function(e){h.getTarget(e).style.filter="Alpha(Opacity=70)",h.getTarget(e).style.opacity=.7}),h.addHandler(o,"mouseout",function(e){h.getTarget(e).style.filter="",h.getTarget(e).style.opacity=1})},show:function(t,n){var i=this.wrap,a=i.style;this.isshow||("undefined"!=typeof t&&(a.left=t+"px"),"undefined"!=typeof n&&(a.top=n+"px"),a.display="",this.isshow=!0,q.childDisplay(),e.suda("tool_more"),o.userObj.mt&&"cntouzi2"==o.userObj.mt&&e.suda("touzi_pc_v2_market_today_17",null,"touzi_pc_v2_market_today"))},hide:function(){this.wrap.style.display="none",this.isshow=!1,q.childDisplay(1)}};var z,V,X,$={classStyle:{ctn:"{position:absolute;right:0;top:4px;z-index:301;}\n",hover:"{filter:Alpha(Opacity=70);opacity:0.7;}\n",fullscreen:'{float:left;width:22px;height:22px;cursor:pointer;margin-right:5px;background: url("'+R+'") no-repeat 0px -24px;}\n',more:'{float:left;width:22px;height:22px;cursor:pointer;margin-right:5px;background: url("'+R+'") no-repeat 7px -72px;}\n'},className:{ctn:"kke_cfg_ctn",fullscreen:"kke_cfg_fullscreen",more:"kke_cfg_share"}},Y=d(o.userObj.dom_id).parentNode,W=!1,G=!1;window.charttest={fs:k};var q;T(),o.chart&&(o.chart.showTradeBox=E)}var l,r=e.$C,s=e.oc,d=e.$DOM,c=e.fBind,u=e.bridge,p=e.cssUtil,h=e.xh5_EvtUtil,f=e.localSL,m=e.isFunc,g="https://current.sina.com.cn/sinatkchart/settingpanel.html?20161230a";return new function(){this.VER="1.2.8",this.get=function(e,t){l=e.userObj;var n=new o(e);m(t)&&t(n)}}});;
xh5_define("plugins.sinaTKChart",["utils.util"],function(e){"use strict";function t(t){function a(e){return/^sh000001|sz399001|sz399006|sz399415|sz399416|sz399300|sz000300$/.test(e)?(K.DKpChart="dpdk",K.DKtChart="dpdks",!0):!1}function p(e,t){var a="#f11200",n="#00a800",i="#666666";if("US"==K.market||"HK"==K.market){var o=a;a=n,n=o}var r=t?t:0,l=i;return e>r?l=a:r>e&&(l=n),l}function h(e){var t={api:{t:{},k:{}},param:{t:{},k:{}}},n={K_RISE:"#23bc01",K_FALL:"#f11200",T_RISE:"#23bc01",T_FALL:"#f11200",F_RISE:"#23bc01",F_FALL:"#f11200"},i={dim:{},menu:{menu_rek:!1,user_obj:K,tab:[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}]},param:{t:{theme:n},k:{theme:n}},api:{t:{tCharts:[[{name:"TVOL"}]],setCustom:{show_floater:!1,mousewheel_zoom:!1,touch_prevent:!1}},k:{tCharts:[[{name:"VOLUME"}]],setCustom:{show_floater:!1,touch_prevent:!1},showRangeSelector:{display:!1}}}},o={dim:{},menu:{user_obj:K,menu_rek:!1},param:{t:{theme:n},k:{theme:n}},api:{t:{setCustom:{indicator_reheight:!0,allow_indicator_edit:!0,storage_lv:2},showRangeSelector:{display:!0}},k:{setCustom:{indicator_reheight:!0,allow_indicator_edit:!0,storage_lv:2},showRangeSelector:{display:!0}}}};if(K.iswap||K.menu&&K.menu.menu_wapmore){var r={tCharts:I,setCustom:{allow_indicator_edit:!0,mousewheel_zoom:!0}};switch(K.menu&&K.menu.menu_wapmore&&("HK"!=e&&(r.showRangeSelector={display:!0}),i.api.t=r,i.api.k={pCharts:[[{name:"MA"}]],tCharts:E,setCustom:{allow_indicator_edit:!0,mousewheel_zoom:!0},showRangeSelector:{display:!0}}),e){case"OTC":i.param=t.param;break;case"global_index":i.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}];break;case"op_m":i.menu.tab=[{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}];break;case"US":switch(i.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"\u66f4\u591a",v:"more",t:"K"}],i.menu.more=[{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"1\u6708",v:"km1",t:"K"},{lab:"3\u6708",v:"km3",t:"K"},{lab:"1\u5e74",v:"km12",t:"K"}],i.api.t.setLineStyle={linetype:"mountain"},i.api.t.showScale="pct",K.symbol){case"gb_dji":K.symbol="gb_$dji";break;case"gb_ixic":K.symbol="gb_$ixic";break;case"gb_inx":K.symbol="gb_$inx"}break;case"CN":var l=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"\u66f4\u591a",v:"more",t:"K"}],s=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"B/S\u70b9",v:"kdd",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"\u66f4\u591a",v:"more",t:"K"}];i.menu.tab=A(K.symbol)&&K.mt&&(K.iswap||K.menu&&!K.menu.menu_wapmore)?s:l,i.menu.more=[{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"}],i.param=t.param;break;case"HF":i.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}],i.api.t.showScale="pct",i.param=t.param;break;case"HK":}t=i}else{switch(e){case"forex":case"forex_yt":var c=["USDTRY","USDZAR","AUDUSD","USDCAD","USDCHF","USDCNH","CZKUSD","DKKUSD","EURUSD","GBPUSD","USDHKD","USDHUF","ILSUSD","USDINR","USDJPY","USDMXN","MYRUSD","USDNOK","NZDUSD","PLNUSD","USDRUB","SEKUSD","SGDUSD","ARSUSD","USDPHP","USDKRW","USDIDR"],d=K.symbol.toUpperCase().replace("FX_S","");o.menu.tab=c.indexOf(d)>=0?[{lab:"1\u5206",v:"k1",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"},{lab:"4H",v:"k240",t:"K"}]:[{lab:"1\u5206",v:"k1",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"30\u5206",v:"k30",t:"K"}];break;case"OTC":o.menu.tab="sb899001"==K.symbol?[{lab:"\u5e74\u7ebf",v:"kcl",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}]:[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"\u5e74\u7ebf",v:"kcl",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}],o.param=t.param,o.param.k.candlenum=70,o.api.t={tCharts:[[{name:"TVOL"},{name:"LB"},{name:"BLANKCTN"}],{callback:function(){D(w)}}],setCustom:{allow_indicator_edit:!0,storage_lv:2,mousewheel_zoom:!1}};break;case"US":o.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u5e74\u7ebf",v:"kcl",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"}],o.api.t.setLineStyle={linetype:"mountain"},o.api.t.showScale="pct";break;case"HK":o.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}],o.api.t.setCustom.mousewheel_zoom=!1,o.api.t.showRangeSelector.display=!1;break;case"op_m":o.menu.tab=[{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}];break;case"global_index":o.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}],o.api.t.setCustom.mousewheel_zoom=!1,o.api.t.showRangeSelector.display=!1;break;case"HF":o.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u5e74\u7ebf",v:"kcl",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}],o.api.t.showScale="pct",o.param=t.param;break;case"CN":o.menu.tab=K.mt&&("cnlv1"==K.mt||"cnlv2"==K.mt||"cntouzi2"==K.mt)&&a(K.symbol)||A(K.symbol)?[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u5e74\u7ebf",v:"kcl",t:"K"},{lab:"B/S\u70b9",v:"kdd",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"}]:[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u5e74\u7ebf",v:"kcl",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"}],o.menu.menu_rek=!0,o.param=t.param;break;case"NF":o.menu.tab=[{lab:"\u5206\u65f6",v:"ts",t:"T"},{lab:"5\u65e5",v:"t5",t:"T"},{lab:"\u5e74\u7ebf",v:"kcl",t:"K"},{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"},{lab:"5\u5206",v:"k5",t:"K"},{lab:"15\u5206",v:"k15",t:"K"},{lab:"30\u5206",v:"k30",t:"K"},{lab:"60\u5206",v:"k60",t:"K"}],o.api.t.tCharts=[[{name:"TVOL"},{name:"POSITION"},{name:"BLANKCTN"}],{callback:function(){D(w)}}],o.api.t.showScale="pct",o.param=t.param}t=o}return t}function u(e){for(var t,a=0;6>a;a++)t=n("span"),t.style.display="block",t.style.styleFloat="left",t.style.cssFloat="left",t.style.width="33%",t.style.lineHeight="normal",e.appendChild(t)}function m(){O.dim={H_T_G:40,H_T_T:0,posX:55},B.dim={H_T_G:40,H_T_T:0,posX:45},B.candlenum=45}function f(e){switch(e){case 0:case 1:case 2:return"t";case 23:case 24:case 25:return 23;case 167:case 168:case 169:return 167;case 719:case 720:case 721:return 719;default:return e}}function g(t){if(t.info.data){var a=t.info.viewRangeState,n=f(a.viewId);if(!isNaN(a.start)&&!isNaN(a.end)){var i,o,r,l,s,c,d=document.getElementById("mainarea_"+t.chart.getChartId());if("t"==t.type?(l=t.info.data[0].length,s=[a.start*l,a.end*l-1],c=t.chart.getSymbols()[0]+"|"+n):(s=a.dataLength<t.info.minCandleNum?[0,t.info.minCandleNum-1]:[a.start,a.end],c=t.chart.getSymbols()[0]+"|"+n),t.info.isCompare?"t"==t.type?(o=t.info.data[0][0].prevclose,i=[(t.info.range[0]+1)*o,(t.info.range[1]+1)*o]):(r=t.info.data[0],o=r.close/(1+r.percent),i=[(t.info.range[1]+1)*o,(t.info.range[0]+1)*o]):i="t"==t.type?t.info.range:[t.info.range[1],t.info.range[0]],K.dotTool&&"k"==t.type)if(K.dotTool.inited)~[23,24,25,364,365,366].indexOf(n)?(K.dotTool.show(),K.dotTool.update({zoom:s,domain:i,width:t.info.width,height:t.info.height,top:t.info.top,left:t.info.left,rangeData:t.info.data})):K.dotTool.hide();else{var p=K.settingCfg.tkChart.showDotTool;K.dotTool.init({parentDiv:d,width:t.info.width,height:t.info.height,top:t.info.top,left:t.info.left,zoom:s,domain:i,rangeData:t.info.data,onclick:function(t){e.suda("go_LHB"),window.open(t.data[0].url)},tip:{show:!0,formatter:function(e){return e.date+":\u9f99\u864e\u699c"}},alwaysHide:p&&!p.alwaysShow})}if(K.paintTool)if(K.paintTool.param){var h={zoom:s,domain:i,parentDiv:d,width:t.info.width,height:t.info.height,top:t.info.top,left:t.info.left,shapeListName:c};"k"==t.type&&(h.data=C.getExtraData({name:"currentK",clone:!1})),K.paintTool.update(h)}else{var u={shapeListName:c,localStorage:!0,parentDiv:d,width:t.info.width,height:t.info.height,top:t.info.top,left:t.info.left,showZIndex:35,interactZIndex:55,zoom:s,domain:t.info.range,style:{strokeStyle:"#000",lineWidth:1},paintOnEachCenter:!0,saveKeyPreName:"sinatkchart_paintSth_",checkIfNotSave:function(e){return e&&e.match(/sinatkchart_paintSth_[\S]*\|(t|5|15|30|60)/)}};"k"==t.type&&(u.data=C.getExtraData({name:"currentK",clone:!1})),K.paintTool.init(u)}n!=z&&N.re("PAINTTOOL_VIEW_CHANGEED",n),z=n}}}function b(){var a=(new Date).getTime()+Math.floor(987654321*Math.random()+1);return{charts_dom_id:"KKE_chart_"+a,charts_Start:"T",charts_hasTChart:!1,stock_stutas:void 0,compare:{color:["#f69931","#f2c700","#3e4de1","#bf58ef"],userObj:K,tkchart:N,dis_compare:!1,compare_dom_id:"KKE_compare_"+a,compare_dom_left:"5px",compare_dom_h:23},menu:{dis_menu:!0,menu_rek:void 0,menu_wapmore:!1,menu_dom_id:"KKE_menu_"+a,menu_dom_h:30},zoom:{zoom_btn:!1},range:{rangeColor:["#666","#666","#666","#666","#666","#666"],rangeLabel:"margin-left:5px;margin-right:1px;border:#ffffff solid 1px;padding: 1px 2px;text-align: center;",rangeValue:"display: inline-block;",range_font:void 0,range_dom_id:"KKE_range_"+a,range_dom_h:20,dis_range:!0},dim:{H_T_B:0,H_BLK:22,I_V_O:-22},param:{t:{onrange:function(e){g({chart:w,info:e,type:"t"})},oninnerresize:function(e){t.paintTool&&t.paintTool.resize(e)},onviewprice:function(t){if(t.data&&o(U.range.range_dom_id)){var a=t.data,n=K.iswap||K.menu&&K.menu.menu_wapmore?a.time:a.day,i=Number(a.volume);Number(i)<0&&(i=0),a.price<0&&(a.price=0),a.percent=isNaN(a.percent)?"--":(100*a.percent).toFixed(2),i=0==i?0:e.strUtil.vs(i,!0);var r=a.avg_price.toFixed(2),l=[n," \u4ef7:",a.price.toFixed(2)," \u5747:",r," \u91cf:",i," \u5e45:",a.percent+"%"];if(K){var s=K.market;if("US"===s&&l.splice(3,2),"HK"===s){var c=K.symbol.length;K.symbol.substring(c-1,c)>="A"&&(r=l[4]="-")}}var d;if(K.iswap||K.menu&&K.menu.menu_wapmore){var h=o(U.range.range_dom_id).childNodes;for(d=0;d<h.length;d++){var u;h[d].innerHTML="",l[2*d]&&(u=0==d?l[2*d]:l[2*d-1]+l[2*d],h[d].innerHTML=u)}}else{var m=t.curname.length>4?t.curname.substring(0,5)+"..":t.curname;(e.isObj(t.data_array)&&t.data_array.length>1||t.data_array>1)&&(l[0]=l[0]+" ["+m+"] ");var f,g;"HF"==K.market?f=g="":(f='<span style="color:'+X.range.rangeColor[2]+';" class="'+X.range.rangeLabel+'">\u91cf</span>',g='<span class="'+X.range.rangeValue+'">'+i+"</span>");var b=[l[0],'<span style="color:'+X.range.rangeColor[0]+';" class="'+X.range.rangeLabel+'">\u4ef7</span>','<span style="color:'+p(a.change)+';" class="'+X.range.rangeValue+'">'+a.price.toFixed(2)+"</span>",'<span style="color:'+X.range.rangeColor[1]+';" class="'+X.range.rangeLabel+'">\u5747</span>','<span style="color:'+p(a.change)+';" class="'+X.range.rangeValue+'">'+r+"</span>",f,g,'<span style="color:'+X.range.rangeColor[3]+';" class="'+X.range.rangeLabel+'">\u5e45</span>','<span style="color:'+p(a.change)+';" class="'+X.range.rangeValue+'">'+a.percent+"%</span>"];if("cntouzi2"!=K.mt)for(d=0;d<b.length;d++)b[d]=b[d].replace('" class="'," "),b[d]=b[d].replace("class","style");o(U.range.range_dom_id).innerHTML=b.join("")}}}},k:{onrange:function(e){g({chart:C,info:e,type:"k"})},oninnerresize:function(e){t.paintTool&&t.paintTool.resize(e),t.dotTool&&t.dotTool.update(e)},onviewprice:function(t){if(o(U.range.range_dom_id)){var a=t.data,n=a.close/(1+Number(a.percent));a.percent=isNaN(a.percent)?"--":(100*a.percent).toFixed(2),a.ampP=isNaN(a.ampP)?"--":(100*a.ampP).toFixed(2);var i=Number(a.volume);i=0==i?0:e.strUtil.vs(i,!0);var r="";if(T&&"CN"==K.market&&A(K.symbol)){var l=0;d.load({uid:[K.CFGSETTING_IFRAME_PREFIX,(new Date).getTime(),Math.floor(987654321*Math.random()+1)].join("|"),key:K.CFGSETTING_IFRAME_PREFIX},function(e){if(l=e?JSON.parse(e).kChart.setReK:0,"kd"==T.chooseTab.tab||"kw"==T.chooseTab.tab||"km"==T.chooseTab.tab||"kcl"==T.chooseTab.tab)switch(l){case"0":r="";break;case"1":r='<span style="color:#ff0000">[\u540e\u590d\u6743]</span>';break;case"-1":r='<span style="color:#ff0000">[\u524d\u590d\u6743]</span>'}else"kdd"==T.chooseTab.tab&&(r='<span style="color:#ff0000">[\u524d\u590d\u6743]</span>')},!0)}if(t.data_array.length>1){var s=t.curname.length>4?t.curname.substring(0,5)+"..":t.curname;r='<span style="color:#000000">['+s+"]</span>"}var c=[a.day," ",a.time||"",r," \u5f00:",a.open.toFixed(2)," \u9ad8:",a.high.toFixed(2)," \u5e45:",a.percent+"%"," \u6536:",a.close&&a.close.toFixed(2)," \u4f4e:",a.low.toFixed(2)," \u91cf:",i];if(K.iswap||K.menu&&K.menu.menu_wapmore){var h=o(U.range.range_dom_id).childNodes;c.splice(0,4),c.unshift(a.day);for(var u,m=0,f=h.length;f>m;m++)u=0==m?c[2*m]:c[2*m-1]+c[2*m],h[m].innerHTML=u}else{var g,b;"HF"==K.market?g=b="":(b='<span style="color:'+X.range.rangeColor[4]+';" class="'+X.range.rangeLabel+'">\u91cf</span>',g='<span class="'+X.range.rangeValue+'">'+i+"</span>");var v=[c[0],'<span style="color:'+X.range.rangeColor[0]+';" class="'+X.range.rangeLabel+'">\u5f00</span>','<span style="color:'+p(a.open,n)+';" class="'+X.range.rangeValue+'">'+a.open.toFixed(2)+"</span>",'<span style="color:'+X.range.rangeColor[1]+';" class="'+X.range.rangeLabel+'">\u9ad8</span>','<span style="color:'+p(a.high,n)+';" class="'+X.range.rangeValue+'">'+a.high.toFixed(2)+"</span>",'<span style="color:'+X.range.rangeColor[2]+';" class="'+X.range.rangeLabel+'">\u6536</span>','<span style="color:'+p(a.close,n)+';" class="'+X.range.rangeValue+'">'+a.close.toFixed(2)+"</span>",'<span style="color:'+X.range.rangeColor[3]+';" class="'+X.range.rangeLabel+'">\u4f4e</span>','<span style="color:'+p(a.low,n)+';" class="'+X.range.rangeValue+'">'+a.low.toFixed(2)+"</span>",b,g,'<span style="color:'+X.range.rangeColor[5]+';" class="'+X.range.rangeLabel+'">\u5e45</span>','<span style="color:'+p(a.change)+';" class="'+X.range.rangeValue+'">'+a.percent+"%</span>"];if("cntouzi2"!=K.mt)for(m=0;m<v.length;m++)v[m]=v[m].replace('" class="'," "),v[m]=v[m].replace("class","style");o(U.range.range_dom_id).innerHTML=v.join("")}}}}},api:{t:{setCustom:{show_underlay_vol:!1},tCharts:I},k:{setCustom:{show_underlay_vol:!1},pCharts:[[{name:"MA"}]],tCharts:E}}}}function v(e){for(var t=[],a=0,n=e.length;n>a;a++)t.push({date:e[a].dt.replace(/-/g,"/"),data:[{url:e[a].url}]});return t}function _(){("forex"==K.market||"forex_yt"==K.market)&&(C.showView("k1"),C.setLineStyle({linetype:"line"}),C.pCharts([{name:"MA"}],{toremove:!0}))}function k(){c.get("kke_CnLv1_PPT_v2")||!K.mt||"cnlv1"!=K.mt&&"cnlv2"!=K.mt||KKE.api("tools.pptsetting.get",function(){KKE.api("ppt.ppt.get",{menu:T,userObj:K},null)},null)}function y(){KKE.api("plugins.paintSth.get",{},function(e){K.paintTool=e,e.bind("save",function(){try{var e=JSON.parse(arguments[1]);for(var t in e)if(e.hasOwnProperty(t))for(var a=e[t].length;a--;)delete e[t][a].style;SUDA.uaTrack("chart_draw",encodeURIComponent(arguments[0])+"$$$$"+encodeURIComponent(JSON.stringify(e)))}catch(n){}})}),K.uParam=X.menu.menu_dom_h+2+X.range.range_dom_h,KKE.api("plugins.userpanel.get",{userObj:K,chartId:X.domid,menu:T,chart:N},function(){})}function x(e){if(!X.iswap&&!X.menu.menu_wapmore){for(var t=0;t<X.menu.tab.length;t++){var a=X.menu.tab[t].v;if(a==e.view){!e.active&&(e.active=t);break}}T&&(T.chooseTab.tye="t"==e.view.substring(0,1)?"T":"K",T.setTarget(e.active||0))}}e.xh5_EvtDispatcher.call(this);var w,C,T,N=this,K=t;this.me=N;var S={},D=function(e){var t,a,n,i,o=e.getChartId(),r="blankctn_"+o,l=e.type;if("h5k"==l){switch(t="HF"!=K.market?["\u65e0","MACD","KDJ","RSI","BOLL","WR","DMI","BBIBOLL","ROC","PSY","OBV","WVAD","CCI","TRIX","DMA","EXPMA","BIAS","ASI","VR","EMV","BRAR"]:["\u65e0","MACD","KDJ","RSI","BOLL","WR","DMI","BBIBOLL","ROC","PSY","CCI","TRIX","DMA","EXPMA","BIAS","ASI","BRAR"],K.market){case"HF":case"forex":case"forex_yt":case"global_index":a="\u65e0";break;default:a="VOLUME"}i=1,n="k"}else{switch(i=60,K.market){case"HF":case"global_index":t=["\u65e0","MACD","BOLL","RSI","BBIBOLL","ROC","TRIX","DMA","EXPMA","BIAS","VR"],a="\u65e0";break;case"NF":t=["\u65e0","POSITION","LB","MACD","BOLL","RSI","BBIBOLL","ROC","TRIX","DMA","EXPMA","BIAS","VR"],a="TVOL";break;default:t="cnlv2"==K.mt?["\u65e0","TFLOW","LB","MACD","BOLL","RSI","BBIBOLL","ROC","TRIX","DMA","EXPMA","BIAS","VR"]:["\u65e0","LB","MACD","BOLL","RSI","BBIBOLL","ROC","TRIX","DMA","EXPMA","BIAS","VR"],a="TVOL"}n="t"}KKE.api("plugins.indicatortab.get",{charts:[e],rightW:i,fix:{firsts:[a],lasts:["BLANKCTN"]},tabs:t,active:1,type:n,domid:r},function(e){S[l]=e})},L={kChart:{pCharts:[{name:"MA"}],setCustom:{centerZoom:!0,history_t:"window",show_k_rangepercent:!0,show_ext_marks:!0,show_floater:!0},setReK:0,setLineStyle:{linetype:"solid"}},tChart:{setCustom:{show_floater:!0},setLineStyle:{linetype:"line"}},tkChart:{showView:"t1",showDotTool:{alwaysShow:!0}}};K.indicatorTab=D,K.indicatorTabLogger=S,K.CFGSETTING_IFRAME_PREFIX="sinatkchart_settingcfgpanel~",K.REKSETTING_PREFIX="sinatkchart_reksetting~",K.REKSETTING_COOKIE="kCookieRek",K.EXTEND_PERFIX="sinatkchart_extendsettingV2",K.settingCfg=void 0,K.settingRek=void 0,K.market=e.market(K.symbol),K.DKpChart="TZY",K.DKtChart="TZYS";var A=function(e){return/^sh6\d{5}|sh900\d{3}|sz00\d{4}|sz30\d{4}|sz20\d{4}$/.test(e)};!function(){d.load({uid:[K.CFGSETTING_IFRAME_PREFIX,(new Date).getTime(),Math.floor(987654321*Math.random()+1)].join("|"),key:K.CFGSETTING_IFRAME_PREFIX},function(e){e?K.settingCfg=i(L,JSON.parse(e)):("US"==K.market&&(L.tChart.setLineStyle.linetype="mountain"),K.settingCfg=L)},!0)}();var I;!function(){switch(K.market){case"NF":I=[[{name:"POSITION"},{name:"TVOL"},{name:"LB"},{name:"BLANKCTN"}],{callback:function(){D(w)}}];break;case"HF":case"global_index":I=[[{name:"MACD"},{name:"BLANKCTN"}],{callback:function(){D(w)}}];break;default:I="cnlv2"==K.mt?[[{name:"TVOL"},{name:"TFLOW"},{name:"BLANKCTN"}],{callback:function(){D(w)}}]:[[{name:"TVOL"},{name:"LB"},{name:"BLANKCTN"}],{callback:function(){D(w)}}]}}();var E;switch(K.market){case"HF":case"forex_yt":case"forex":E=[[{name:"MACD"},{name:"BLANKCTN"}],{callback:function(){D(C)}}];break;default:E=[[{name:"VOLUME"},{name:"MACD"},{name:"BLANKCTN"}],{callback:function(){D(C)}}]}var H,F,P,j,M,R,O,B,U,z,V,X=void 0,G=function(e,t){KKE.api("plugins.compare.get",X.compare,function(a){V=a,e.appendChild(t)})},$=function(e){X.menu.dis_menu?(F=n("div"),F.id=X.menu.menu_dom_id,K.iswap&&(X.menu.menu_dom_h=39),F.style.height=X.menu.menu_dom_h+"px",X.menu.iswap=K.iswap,e.appendChild(F)):X.menu.menu_dom_h=0},Y=function(){X.compare.dis_compare?(M=n("div"),M.id=X.compare.compare_dom_id,M.style.clear="both",M.style.marginLeft=X.compare.compare_dom_left,M.style.paddingTop="7px",M.style.lineHeight=M.style.height=X.compare.compare_dom_h+"px",X.compare.compare_dom_h=30):X.compare.compare_dom_h=0},W=function(e){if(X.range.dis_range){if(j=n("div"),j.id=X.range.range_dom_id,j.style.clear="both",j.style.marginLeft="5px",j.style.whiteSpace="nowrap",K.iswap||X.menu.menu_wapmore)j.style.fontSize="10px",j.style.marginLeft="25px",u(j),X.range.range_dom_h=30,j.style.height=X.range.range_dom_h+"px";else{j.style.fontSize="12px";var t=4;j.style.paddingTop=t+"px",j.style.lineHeight=j.style.height=X.range.range_dom_h+"px",X.range.range_dom_h+=t}e.appendChild(j)}else X.range_dom_h=0},q=function(e){$(e),W(e),Y(e)},J=function(e){X.compare.dis_compare?(e.appendChild(M),G(e,M)):X.compare.compare_dom_h=0},Z=function(){X.charts_hasTChart||"US"!==K.market||1!==X.stock_stutas||(X.menu.tab=[{lab:"\u65e5K",v:"kd",t:"K"},{lab:"\u5468K",v:"kw",t:"K"},{lab:"\u6708K",v:"km",t:"K"}])},Q=function(){var t=e.$C("div");return t.style.width=t.style.height="100%",t.style.position="relative",K.dom_id=t.id="tkChart_wwy"+K.symbol,t},ee=function(){var e=o(K.dom_id),t=Q();e.appendChild(t),t.style.webkitUserSelect=t.style.userSelect=t.style.MozUserSelect="none",U=b(),X=i(U,X||null),X=O=B=i(X,K||null),X.domid=U.charts_dom_id,X.symbol=K.symbol,("forex"==K.market||"forex_yt"==K.market)&&(X.charts_Start="K"),R=h(K.market),X=i(X,R),X=i(X,K),O=i(X.param.t,O||null),B=i(X.param.k,B||null),B.pcm=2,K.iswap&&m(),P=n("div"),P.id=U.charts_dom_id,q(t);var a=t.offsetHeight,r=t.offsetHeight-X.menu.menu_dom_h-2-X.range.range_dom_h-X.compare.compare_dom_h,l=r/a*100;P.style.height=l+"%",t.appendChild(P),J(t),Z(),"op_m"==K.market&&(X.charts_Start="K"),H=X.api},te=function(){var t=K.settingCfg.kChart;for(var a in t)t.hasOwnProperty(a)&&"setCustom"==a&&C[a](t[a]);T&&T.setPPT("block"),C.setCustom({allow_indicator_edit:!0}),C.setCustom({storage_lv:2}),e.suda("m_bs"),C.showView("kd"),C.setDimension({I_V_O:0}),C.pCharts([{name:K.DKpChart}],{isexclusive:!0}),"cnlv1wap"==K.mt?(C.tCharts([{name:K.DKtChart}],{isexclusive:!0}),C.showRangeSelector({display:!1})):(C.tCharts([{name:K.DKtChart},{name:"volume"}],{isexclusive:!0}),C.showRangeSelector({display:!0})),"TZY"==K.DKpChart&&C.setReK(-1)},ae=function(e){var t=new Date,a=new Date;switch(e){case"km12":t.setDate(t.getDate()-264);break;case"km1":t.setDate(t.getDate()-22);break;case"km3":t.setDate(t.getDate()-66)}C.showYTD(),C.showRangeSelector({from:t,to:a})},ne=function(e,t,a){var n=void 0;n="t"==t?K.settingCfg.tChart:K.settingCfg.kChart;for(var i in n)if(n.hasOwnProperty(i))if("pCharts"==i||"tCharts"==i){if(T&&"k1"==T.chooseTab.tab)continue;e[i](n[i],{isexclusive:!0,callback:function(){n.setCustom&&n.setCustom.show_underlay_vol&&e.setCustom({show_underlay_vol:n.setCustom.show_underlay_vol})}})}else if("setReK"==i)A(K.symbol)&&e[i](n[i]);else if("showView"==i)N[i]({view:n[i]});else{if(T&&"kcl"==T.chooseTab.tab&&"setLineStyle"==i){e.setLineStyle.styletype="line";continue}e[i](n[i])}if("init"==a)for(i in K.settingCfg.tkChart)K.settingCfg.tkChart.hasOwnProperty(i)&&N[i]("showView"===i?{view:K.settingCfg.tkChart[i]}:K.settingCfg.tkChart[i])},ie=function(){if(w&&w.getSymbols().length>1)for(var e="line",t=1;t<w.getSymbols().length;t++)C.compare({symbol:w.getSymbols()[t],linecolor:{K_N:X.compare.color[t-1]},linetype:e})},oe=0,re=function(a,n,i,o){oe>0||(oe++,KKE.api("chart.h5k.get",B,function(e){if(N.kChart=C=e,n&&"kdd"==n)te(),o&&x({view:n,active:o});else{for(var t in H.k)if(H.k.hasOwnProperty(t)){var l=H.k[t];s(l)||(l=[l]),("pCharts"!=t||X.iswap)&&r(C[t])&&C[t].apply(null,l)}"km1"==n||"km3"==n||"km12"==n?ae(n):n&&C.showView(n),i&&A(K.symbol)&&C.setReK("cnlv1wap"===K.mt?0:i),X.iswap||"cnlv1wap"==K.mt?"cnlv1wap"===K.mt&&C.tCharts([{name:"MACD"}],{isexclusive:!0}):(T&&ne(C),"kcl"==n&&C.showView(n))}if(ie(),a){var c=K.iswap||X.menu.menu_wapmore?1:2;T&&T.setTarget(c),C.compare(a.obj,a.rm)}T?(T.setChart({k:C,o:K}),o&&x({view:n,active:o})):X.menu.dis_menu&&se(X.menu,{type:"k",chart:C},function(){ne(C),_()})}),"CN"===e.market(t.symbol)&&A(t.symbol)&&KKE.api("plugins.dotTool.get",{},function(t){K.dotTool=t;var a=new Date;a=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),e.load("//finance.sina.com.cn/touzi/lhstockskx/"+K.symbol+".js?"+a,function(){K.dotTool.pushData({key:"tzylhb",data:v(window["tzy_lhstock_kx_"+K.symbol]),dotStyle:{position:"absolute",width:"8px",height:"8px",borderRadius:"8px",color:"white",backgroundColor:"#349FF9",zIndex:99,cursor:"pointer",opacity:1,filter:"alpha(opacity=100)",boxShadow:null},dotHoverStyle:{opacity:.8,filter:"alpha(opacity=80)",boxShadow:"0px 0px 5px 2px #349FF9"},tipStyle:{position:"absolute",backgroundColor:"#349FF9",color:"white",zIndex:999,padding:"5px 10px",textIndent:"18px",borderRadius:"5px",backgroundImage:"url(//n.sinaimg.cn/finance/h5chart/toast.png)",backgroundPosition:"0px -55px",minWidth:"110px",lineHeight:"15px",height:"15px",fontSize:"12px"}})})}))},le=function(){KKE.api("chart.h5t.get",O,function(e){var t=K.market;N.tChart=w=e;for(var a in H.t)if(H.t.hasOwnProperty(a)){var n=H.t[a];s(n)||(n=[n]),r(w[a])&&("US"!=t||1!==X.stock_stutas)&&w[a].apply(null,n)}T?T.setChart({t:w}):X.menu.dis_menu&&se(X.menu,{type:"t",chart:w}),X.iswap||X.menu.menu_wapmore||ne(w,"t","t1"==K.settingCfg.tkChart.showView?"click":"init"),X.menu.dis_menu||N.re("T_DATA_LOADED",null)})};this.setTKChart=function(e){K.settingCfg=e,T&&T.setCfg(e),T&&"kdd"!=T.chooseTab.tab&&"k1"!=T.chooseTab.tab&&(C&&ne(C),w&&ne(w,"t")),e.tkChart.showDotTool&&this.showDotTool(e.tkChart.showDotTool),d.save({uid:[K.CFGSETTING_IFRAME_PREFIX,(new Date).getTime()].join("|"),key:K.CFGSETTING_IFRAME_PREFIX,value:e})};var se=function(e,t,a){var n=t.type,i={};switch(n){case"t":i={t:t.chart};break;case"k":i={k:t.chart}}X.menu.me=N,X.menu[n+"chart"]=t.chart,KKE.api("plugins.menu.get",X.menu,function(e){N.re("T_DATA_LOADED",null),T=e,X.iswap||X.menu.menu_wapmore||(y(),k()),"forex"==K.market||"forex_yt"==K.market?de?x(de):T.chooseTab={tye:"K",tab:"k1"}:x({view:K.settingCfg.tkChart.showView}),a&&a()})},ce=function(t){if(e.isStr(t)){var a=String(t).toLowerCase();switch(a){case"t":le();break;case"k":re()}l.addHandler(window,"resize",function(){N.onresize()})}};ee(),ce(X.charts_Start),this.chartUserobj=K,this.initK=re,this.initT=le,this.compare=function(t,a){var n=e.market(t.symbol),i=K.market;if(t.linetype="line",n===i)w&&w.compare(t,a),C&&C.compare(t,a);else if(w&&w.hide(),C){var o=K.iswap||X.menu.menu_wapmore?1:2;T&&T.setTarget("kdd"==T.chooseTab.tab?3:o),C.show(),C.compare(t,a)}else re({obj:t,rm:a})};var de,pe=new function(){var e=0,t=function(a,n,i){var o;i||(i=100);try{o=C}catch(r){}return o?n():void(e++<10&&setTimeout(function(){t(a,n,i)},1.2*i))};this.waitFor=t},he=0;this.showView=function(e){if(e.active&&0==he&&"t1"!=K.settingCfg.tkChart.showView)return he++,void pe.waitFor("",function(){"kdd"==e.view?(te(),x(e)):N.showView(e),he=0});switch(e.view){case"t1":case"ts":C&&C.hide(),w.showView(e.view);break;case"t5":w.showView(e.view);break;case"kdd":case"kd":case"kw":case"km":case"kcl":case"k5":case"k15":case"k30":case"k60":w&&w.hide(),C?C.showView(e.view):re(!1,e.view,void 0,e.active)}de=e,x(e)},this.showDotTool=function(e){var t=e.alwaysShow;K.dotTool&&(t?K.dotTool.show(!0):K.dotTool.hide(!0))},this.pushData=function(e){w&&w.pushData(e.obj,e.num),K.iswap||X.menu.menu_wapmore||C&&C.pushData(e.obj,e.num)},this.resizePaintTool=function(){var e,t,a=K.paintTool,n=K.dotTool;T&&("K"==T.chooseTab.tye&&C?(t=C.getDimension(),e={width:t.w_k,height:t.h_k,left:t.RIGHT_W,top:t.T_F_T}):w&&(t=w.getDimension(),e={width:t.w_t,height:t.h_t,left:t.RIGHT_W,top:t.T_F_T}),e&&a&&a.resize(e),e&&n&&n.update(e))},this.onresize=function(){w&&w.resize(),C&&C.resize(),N.resizePaintTool()},this.update=function(){w&&w.update(),C&&C.update()}}function a(){this.VER="1.3.10",this.get=function(a,n){var i=new t(a),o=function(t){i.me.rl(t,o),e.isFunc(n)&&n(i),window.sinaTKChartV1=i,"sb899001"==a.symbol&&i.showView({view:"kcl",active:0})};i.me.al("T_DATA_LOADED",o,!1),a.mt&&"cnlv1"==a.mt&&KKE.api("tools.spread.get",{userObj:a},null)}}var n=e.$C,i=e.oc,o=e.$DOM,r=e.isFunc,l=e.xh5_EvtUtil,s=e.isArr,c=e.cookieUtil,d=e.bridge;return e.fInherit(t,e.xh5_EvtDispatcher),a});;
